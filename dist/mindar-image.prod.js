"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const te=require("./controller-268bf0da.js"),Wn=require("canvas"),Qt=require("./ui-3a557476.js");class gr{constructor(t,r,u){this.cumsum=[];for(let n=0;n<u;n++){this.cumsum.push([]);for(let i=0;i<r;i++)this.cumsum[n].push(0)}this.cumsum[0][0]=t[0];for(let n=1;n<r;n++)this.cumsum[0][n]=this.cumsum[0][n-1]+t[n];for(let n=1;n<u;n++)this.cumsum[n][0]=this.cumsum[n-1][0]+t[n*r];for(let n=1;n<u;n++)for(let i=1;i<r;i++)this.cumsum[n][i]=t[n*r+i]+this.cumsum[n-1][i]+this.cumsum[n][i-1]-this.cumsum[n-1][i-1]}query(t,r,u,n){let i=this.cumsum[n][u];return r>0&&(i-=this.cumsum[r-1][u]),t>0&&(i-=this.cumsum[n][t-1]),t>0&&r>0&&(i+=this.cumsum[r-1][t-1]),i}}const Dt=10,Rt=2,ne=6,Yn=5,mr=.95,Gn=.9,Jn=.2,Xn=8,Qn=24*2/3,eu=e=>{const{data:t,width:r,height:u,scale:n}=e,i=[r*u];for(let v=0;v<i.length;v++)i[v]=!1;const s=new Float32Array(t.length);for(let v=0;v<r;v++)s[v]=-1,s[r*(u-1)+v]=-1;for(let v=0;v<u;v++)s[v*r]=-1,s[v*r+r-1]=-1;for(let v=1;v<r-1;v++)for(let F=1;F<u-1;F++){let E=v+r*F,w=0,N=0;for(let B=-1;B<=1;B++)w+=t[E+r*B+1]-t[E+r*B-1],N+=t[E+r+B]-t[E-r+B];w/=3*256,N/=3*256,s[E]=Math.sqrt((w*w+N*N)/2)}const h=new Uint32Array(1e3);for(let v=0;v<1e3;v++)h[v]=0;const D=[-1,1,-r,r];for(let v=1;v<r-1;v++)for(let F=1;F<u-1;F++){let E=v+r*F,w=!0;for(let N=0;N<D.length;N++)if(s[E]<=s[E+D[N]]){w=!1;break}if(w){let N=Math.floor(s[E]*1e3);N>999&&(N=999),N<0&&(N=0),h[N]+=1,i[E]=!0}}const p=.02*r*u;let a=999,o=0;for(;a>=0&&(o+=h[a],!(o>p));)a--;for(let v=0;v<i.length;v++)i[v]&&s[v]*1e3<a&&(i[v]=!1);const f=[];for(let v=0;v<t.length;v++)f[v]=t[v]*t[v];const l=new gr(t,r,u),g=new gr(f,r,u),c=new Float32Array(t.length);for(let v=0;v<r;v++)for(let F=0;F<u;F++){const E=F*r+v;if(!i[E]){c[E]=1;continue}const w=Pr({image:e,cx:v,cy:F,sdThresh:Yn,imageDataCumsum:l,imageDataSqrCumsum:g});if(w===null){c[E]=1;continue}let N=-1;for(let B=-Dt;B<=Dt;B++){for(let M=-Dt;M<=Dt;M++){if(M*M+B*B<=Rt*Rt)continue;const C=xr({image:e,cx:v+M,cy:F+B,vlen:w,tx:v,ty:F,imageDataCumsum:l,imageDataSqrCumsum:g});if(C!==null&&C>N&&(N=C,N>mr))break}if(N>mr)break}c[E]=N}return tu({image:e,featureMap:c,templateSize:ne,searchSize:Rt,occSize:Qn,maxSimThresh:Gn,minSimThresh:Jn,sdThresh:Xn,imageDataCumsum:l,imageDataSqrCumsum:g})},tu=e=>{let{image:t,featureMap:r,templateSize:u,searchSize:n,occSize:i,maxSimThresh:s,minSimThresh:h,sdThresh:D,imageDataCumsum:p,imageDataSqrCumsum:a}=e;const{data:o,width:f,height:l,scale:g}=t;i=Math.floor(Math.min(t.width,t.height)/10);const c=(u*2+1)*3,d=Math.floor(f/c),v=Math.floor(l/c);let F=Math.floor(f/i)*Math.floor(l/i)+d*v;const E=[],w=new Float32Array(o.length);for(let B=0;B<w.length;B++)w[B]=r[B];let N=0;for(;N<F;){let B=s,M=-1,C=-1;for(let q=0;q<l;q++)for(let U=0;U<f;U++)w[q*f+U]<B&&(B=w[q*f+U],M=U,C=q);if(M===-1)break;const _=Pr({image:t,cx:M,cy:C,sdThresh:0,imageDataCumsum:p,imageDataSqrCumsum:a});if(_===null){w[C*f+M]=1;continue}if(_/(u*2+1)<D){w[C*f+M]=1;continue}let z=1,k=-1;for(let q=-n;q<=n;q++){for(let U=-n;U<=n;U++){if(U*U+q*q>n*n||U===0&&q===0)continue;const K=xr({image:t,vlen:_,cx:M+U,cy:C+q,tx:M,ty:C,imageDataCumsum:p,imageDataSqrCumsum:a});if(K!==null&&(K<z&&(z=K,z<h&&z<B)||K>k&&(k=K,k>.99)))break}if(z<h&&z<B||k>.99)break}if(z<h&&z<B||k>.99){w[C*f+M]=1;continue}E.push({x:M,y:C}),N+=1;for(let q=-i;q<=i;q++)for(let U=-i;U<=i;U++)C+q<0||C+q>=l||M+U<0||M+U>=f||(w[(C+q)*f+(M+U)]=1)}return E},Pr=({image:e,cx:t,cy:r,sdThresh:u,imageDataCumsum:n,imageDataSqrCumsum:i})=>{if(t-ne<0||t+ne>=e.width||r-ne<0||r+ne>=e.height)return null;const s=2*ne+1,h=s*s;let D=n.query(t-ne,r-ne,t+ne,r+ne);D/=h;let p=i.query(t-ne,r-ne,t+ne,r+ne);return p-=2*D*n.query(t-ne,r-ne,t+ne,r+ne),p+=h*D*D,p/h<u*u?null:(p=Math.sqrt(p),p)},xr=e=>{const{image:t,cx:r,cy:u,vlen:n,tx:i,ty:s,imageDataCumsum:h,imageDataSqrCumsum:D}=e,{data:p,width:a,height:o}=t,f=ne;if(r-f<0||r+f>=a||u-f<0||u+f>=o)return null;const l=2*f+1;let g=h.query(r-f,u-f,r+f,u+f),c=D.query(r-f,u-f,r+f,u+f),d=0,v=(u-f)*a+(r-f),F=(s-f)*a+(i-f),E=a-l;for(let M=0;M<l;M++){for(let C=0;C<l;C++)d+=p[v]*p[F],v+=1,F+=1;v+=E,F+=E}let w=h.query(i-f,s-f,i+f,s+f);w/=l*l,d-=w*g;let N=c-g*g/(l*l);return N==0?null:(N=Math.sqrt(N),1*d/(n*N))},ru=(e,t)=>{const r=[];for(let u=0;u<e.length;u++){const n=e[u],i=eu(n),s={data:n.data,scale:n.scale,width:n.width,height:n.height,points:i};r.push(s),t(u)}return r};function jt(){return jt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&(e[u]=r[u])}return e},jt.apply(this,arguments)}var kr={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function ee(e){return typeof e=="number"}function Me(e){return!e||typeof e!="object"||typeof e.constructor!="function"?!1:e.isBigNumber===!0&&typeof e.constructor.prototype=="object"&&e.constructor.prototype.isBigNumber===!0||typeof e.constructor.isDecimal=="function"&&e.constructor.isDecimal(e)===!0}function Rr(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isComplex===!0||!1}function zr(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isFraction===!0||!1}function qr(e){return e&&e.constructor.prototype.isUnit===!0||!1}function Oe(e){return typeof e=="string"}var J=Array.isArray;function qe(e){return e&&e.constructor.prototype.isMatrix===!0||!1}function mt(e){return Array.isArray(e)||qe(e)}function nu(e){return e&&e.isDenseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function uu(e){return e&&e.isSparseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function iu(e){return e&&e.constructor.prototype.isRange===!0||!1}function er(e){return e&&e.constructor.prototype.isIndex===!0||!1}function ou(e){return typeof e=="boolean"}function su(e){return e&&e.constructor.prototype.isResultSet===!0||!1}function au(e){return e&&e.constructor.prototype.isHelp===!0||!1}function fu(e){return typeof e=="function"}function cu(e){return e instanceof Date}function hu(e){return e instanceof RegExp}function lu(e){return!!(e&&typeof e=="object"&&e.constructor===Object&&!Rr(e)&&!zr(e))}function Du(e){return e===null}function pu(e){return e===void 0}function vu(e){return e&&e.isAccessorNode===!0&&e.constructor.prototype.isNode===!0||!1}function du(e){return e&&e.isArrayNode===!0&&e.constructor.prototype.isNode===!0||!1}function gu(e){return e&&e.isAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function mu(e){return e&&e.isBlockNode===!0&&e.constructor.prototype.isNode===!0||!1}function Eu(e){return e&&e.isConditionalNode===!0&&e.constructor.prototype.isNode===!0||!1}function Fu(e){return e&&e.isConstantNode===!0&&e.constructor.prototype.isNode===!0||!1}function Au(e){return e&&e.isFunctionAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function wu(e){return e&&e.isFunctionNode===!0&&e.constructor.prototype.isNode===!0||!1}function Cu(e){return e&&e.isIndexNode===!0&&e.constructor.prototype.isNode===!0||!1}function yu(e){return e&&e.isNode===!0&&e.constructor.prototype.isNode===!0||!1}function Bu(e){return e&&e.isObjectNode===!0&&e.constructor.prototype.isNode===!0||!1}function Nu(e){return e&&e.isOperatorNode===!0&&e.constructor.prototype.isNode===!0||!1}function _u(e){return e&&e.isParenthesisNode===!0&&e.constructor.prototype.isNode===!0||!1}function Mu(e){return e&&e.isRangeNode===!0&&e.constructor.prototype.isNode===!0||!1}function bu(e){return e&&e.isRelationalNode===!0&&e.constructor.prototype.isNode===!0||!1}function Su(e){return e&&e.isSymbolNode===!0&&e.constructor.prototype.isNode===!0||!1}function Iu(e){return e&&e.constructor.prototype.isChain===!0||!1}function st(e){var t=typeof e;return t==="object"?e===null?"null":Me(e)?"BigNumber":e.constructor&&e.constructor.name?e.constructor.name:"Object":t}function De(e){var t=typeof e;if(t==="number"||t==="string"||t==="boolean"||e===null||e===void 0)return e;if(typeof e.clone=="function")return e.clone();if(Array.isArray(e))return e.map(function(r){return De(r)});if(e instanceof Date)return new Date(e.valueOf());if(Me(e))return e;if(e instanceof RegExp)throw new TypeError("Cannot clone "+e);return Ou(e,De)}function Ou(e,t){var r={};for(var u in e)Ft(e,u)&&(r[u]=t(e[u]));return r}function Et(e,t){var r,u,n;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(u=0,n=e.length;u<n;u++)if(!Et(e[u],t[u]))return!1;return!0}else{if(typeof e=="function")return e===t;if(e instanceof Object){if(Array.isArray(t)||!(t instanceof Object))return!1;for(r in e)if(!(r in t)||!Et(e[r],t[r]))return!1;for(r in t)if(!(r in e))return!1;return!0}else return e===t}}function Ft(e,t){return e&&Object.hasOwnProperty.call(e,t)}function Tu(e,t){for(var r={},u=0;u<t.length;u++){var n=t[u],i=e[n];i!==void 0&&(r[n]=i)}return r}var Pu=["Matrix","Array"],xu=["number","BigNumber","Fraction"],Mt=function(t){if(t)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(kr)};jt(Mt,kr,{MATRIX_OPTIONS:Pu,NUMBER_OPTIONS:xu});function be(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=ku(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var u=0,n=function(){};return{s:n,n:function(){return u>=e.length?{done:!0}:{done:!1,value:e[u++]}},e:function(p){throw p},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,h;return{s:function(){r=r.call(e)},n:function(){var p=r.next();return i=p.done,p},e:function(p){s=!0,h=p},f:function(){try{!i&&r.return!=null&&r.return()}finally{if(s)throw h}}}}function ku(e,t){if(e){if(typeof e=="string")return Er(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Er(e,t)}}function Er(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,u=new Array(t);r<t;r++)u[r]=e[r];return u}function Ge(e){"@babel/helpers - typeof";return Ge=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ge(e)}function Fr(){return!0}function _e(){return!1}function We(){}var Ar="Argument is not a typed-function.";function Lr(){function e(m){return Ge(m)==="object"&&m!==null&&m.constructor===Object}var t=[{name:"number",test:function(A){return typeof A=="number"}},{name:"string",test:function(A){return typeof A=="string"}},{name:"boolean",test:function(A){return typeof A=="boolean"}},{name:"Function",test:function(A){return typeof A=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(A){return A instanceof Date}},{name:"RegExp",test:function(A){return A instanceof RegExp}},{name:"Object",test:e},{name:"null",test:function(A){return A===null}},{name:"undefined",test:function(A){return A===void 0}}],r={name:"any",test:Fr,isAny:!0},u,n,i=0,s={createCount:0};function h(m){var A=u.get(m);if(A)return A;var y='Unknown type "'+m+'"',b=m.toLowerCase(),O,T=be(n),x;try{for(T.s();!(x=T.n()).done;)if(O=x.value,O.toLowerCase()===b){y+='. Did you mean "'+O+'" ?';break}}catch(I){T.e(I)}finally{T.f()}throw new TypeError(y)}function D(m){for(var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any",y=A?h(A).index:n.length,b=[],O=0;O<m.length;++O){if(!m[O]||typeof m[O].name!="string"||typeof m[O].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");var T=m[O].name;if(u.has(T))throw new TypeError('Duplicate type name "'+T+'"');b.push(T),u.set(T,{name:T,test:m[O].test,isAny:m[O].isAny,index:y+O,conversionsTo:[]})}var x=n.slice(y);n=n.slice(0,y).concat(b).concat(x);for(var I=y+b.length;I<n.length;++I)u.get(n[I]).index=I}function p(){u=new Map,n=[],i=0,D([r],!1)}p(),D(t);function a(){var m,A=be(n),y;try{for(A.s();!(y=A.n()).done;)m=y.value,u.get(m).conversionsTo=[]}catch(b){A.e(b)}finally{A.f()}i=0}function o(m){var A=n.filter(function(y){var b=u.get(y);return!b.isAny&&b.test(m)});return A.length?A:["any"]}function f(m){return m&&typeof m=="function"&&"_typedFunctionData"in m}function l(m,A,y){if(!f(m))throw new TypeError(Ar);var b=y&&y.exact,O=Array.isArray(A)?A.join(","):A,T=w(O),x=d(T);if(!b||x in m.signatures){var I=m._typedFunctionData.signatureMap.get(x);if(I)return I}var P=T.length,$;if(b){$=[];var V;for(V in m.signatures)$.push(m._typedFunctionData.signatureMap.get(V))}else $=m._typedFunctionData.signatures;for(var R=0;R<P;++R){var de=T[R],ae=[],le=void 0,re=be($),Ee;try{for(re.s();!(Ee=re.n()).done;){le=Ee.value;var ie=C(le.params,R);if(!(!ie||de.restParam&&!ie.restParam)){if(!ie.hasAny){var Ne=function(){var Fe=E(ie);if(de.types.some(function(je){return!Fe.has(je.name)}))return"continue"}();if(Ne==="continue")continue}ae.push(le)}}}catch(Fe){re.e(Fe)}finally{re.f()}if($=ae,$.length===0)break}var ge,me=be($),$e;try{for(me.s();!($e=me.n()).done;)if(ge=$e.value,ge.params.length<=P)return ge}catch(Fe){me.e(Fe)}finally{me.f()}throw new TypeError("Signature not found (signature: "+(m.name||"unnamed")+"("+d(T,", ")+"))")}function g(m,A,y){return l(m,A,y).implementation}function c(m,A){var y=h(A);if(y.test(m))return m;var b=y.conversionsTo;if(b.length===0)throw new Error("There are no conversions to "+A+" defined.");for(var O=0;O<b.length;O++){var T=h(b[O].from);if(T.test(m))return b[O].convert(m)}throw new Error("Cannot convert "+m+" to "+A)}function d(m){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return m.map(function(y){return y.name}).join(A)}function v(m){var A=m.indexOf("...")===0,y=A?m.length>3?m.slice(3):"any":m,b=y.split("|").map(function(I){return h(I.trim())}),O=!1,T=A?"...":"",x=b.map(function(I){return O=I.isAny||O,T+=I.name+"|",{name:I.name,typeIndex:I.index,test:I.test,isAny:I.isAny,conversion:null,conversionIndex:-1}});return{types:x,name:T.slice(0,-1),hasAny:O,hasConversion:!1,restParam:A}}function F(m){var A=m.types.map(function(x){return x.name}),y=se(A),b=m.hasAny,O=m.name,T=y.map(function(x){var I=h(x.from);return b=I.isAny||b,O+="|"+x.from,{name:x.from,typeIndex:I.index,test:I.test,isAny:I.isAny,conversion:x,conversionIndex:x.index}});return{types:m.types.concat(T),name:O,hasAny:b,hasConversion:T.length>0,restParam:m.restParam}}function E(m){return m.typeSet||(m.typeSet=new Set,m.types.forEach(function(A){return m.typeSet.add(A.name)})),m.typeSet}function w(m){var A=[];if(typeof m!="string")throw new TypeError("Signatures must be strings");var y=m.trim();if(y==="")return A;for(var b=y.split(","),O=0;O<b.length;++O){var T=v(b[O].trim());if(T.restParam&&O!==b.length-1)throw new SyntaxError('Unexpected rest parameter "'+b[O]+'": only allowed for the last parameter');if(T.types.length===0)return null;A.push(T)}return A}function N(m){var A=Ve(m);return A?A.restParam:!1}function B(m){if(!m||m.types.length===0)return Fr;if(m.types.length===1)return h(m.types[0].name).test;if(m.types.length===2){var A=h(m.types[0].name).test,y=h(m.types[1].name).test;return function(T){return A(T)||y(T)}}else{var b=m.types.map(function(O){return h(O.name).test});return function(T){for(var x=0;x<b.length;x++)if(b[x](T))return!0;return!1}}}function M(m){var A,y,b;if(N(m)){A=sr(m).map(B);var O=A.length,T=B(Ve(m)),x=function(P){for(var $=O;$<P.length;$++)if(!T(P[$]))return!1;return!0};return function(P){for(var $=0;$<A.length;$++)if(!A[$](P[$]))return!1;return x(P)&&P.length>=O+1}}else return m.length===0?function(P){return P.length===0}:m.length===1?(y=B(m[0]),function(P){return y(P[0])&&P.length===1}):m.length===2?(y=B(m[0]),b=B(m[1]),function(P){return y(P[0])&&b(P[1])&&P.length===2}):(A=m.map(B),function(P){for(var $=0;$<A.length;$++)if(!A[$](P[$]))return!1;return P.length===A.length})}function C(m,A){return A<m.length?m[A]:N(m)?Ve(m):null}function _(m,A){var y=C(m,A);return y?E(y):new Set}function z(m){return m.conversion===null||m.conversion===void 0}function k(m,A){var y=new Set;return m.forEach(function(b){var O=_(b.params,A),T,x=be(O),I;try{for(x.s();!(I=x.n()).done;)T=I.value,y.add(T)}catch(P){x.e(P)}finally{x.f()}}),y.has("any")?["any"]:Array.from(y)}function q(m,A,y){var b,O,T=m||"unnamed",x=y,I,P=function(){var re=[];if(x.forEach(function(ie){var Ne=C(ie.params,I),ge=B(Ne);(I<ie.params.length||N(ie.params))&&ge(A[I])&&re.push(ie)}),re.length===0){if(O=k(x,I),O.length>0){var Ee=o(A[I]);return b=new TypeError("Unexpected type of argument in function "+T+" (expected: "+O.join(" or ")+", actual: "+Ee.join(" | ")+", index: "+I+")"),b.data={category:"wrongType",fn:T,index:I,actual:Ee,expected:O},{v:b}}}else x=re};for(I=0;I<A.length;I++){var $=P();if(Ge($)==="object")return $.v}var V=x.map(function(le){return N(le.params)?1/0:le.params.length});if(A.length<Math.min.apply(null,V))return O=k(x,I),b=new TypeError("Too few arguments in function "+T+" (expected: "+O.join(" or ")+", index: "+A.length+")"),b.data={category:"tooFewArgs",fn:T,index:A.length,expected:O},b;var R=Math.max.apply(null,V);if(A.length>R)return b=new TypeError("Too many arguments in function "+T+" (expected: "+R+", actual: "+A.length+")"),b.data={category:"tooManyArgs",fn:T,index:A.length,expectedLength:R},b;for(var de=[],ae=0;ae<A.length;++ae)de.push(o(A[ae]).join("|"));return b=new TypeError('Arguments of type "'+de.join(", ")+'" do not match any of the defined signatures of function '+T+"."),b.data={category:"mismatch",actual:de},b}function U(m){for(var A=n.length+1,y=0;y<m.types.length;y++)z(m.types[y])&&(A=Math.min(A,m.types[y].typeIndex));return A}function K(m){for(var A=i+1,y=0;y<m.types.length;y++)z(m.types[y])||(A=Math.min(A,m.types[y].conversionIndex));return A}function W(m,A){if(m.hasAny){if(!A.hasAny)return 1}else if(A.hasAny)return-1;if(m.restParam){if(!A.restParam)return 1}else if(A.restParam)return-1;if(m.hasConversion){if(!A.hasConversion)return 1}else if(A.hasConversion)return-1;var y=U(m)-U(A);if(y<0)return-1;if(y>0)return 1;var b=K(m)-K(A);return b<0?-1:b>0?1:0}function H(m,A){var y=m.params,b=A.params,O=Ve(y),T=Ve(b),x=N(y),I=N(b);if(x&&O.hasAny){if(!I||!T.hasAny)return 1}else if(I&&T.hasAny)return-1;var P=0,$=0,V,R=be(y),de;try{for(R.s();!(de=R.n()).done;)V=de.value,V.hasAny&&++P,V.hasConversion&&++$}catch(nt){R.e(nt)}finally{R.f()}var ae=0,le=0,re=be(b),Ee;try{for(re.s();!(Ee=re.n()).done;)V=Ee.value,V.hasAny&&++ae,V.hasConversion&&++le}catch(nt){re.e(nt)}finally{re.f()}if(P!==ae)return P-ae;if(x&&O.hasConversion){if(!I||!T.hasConversion)return 1}else if(I&&T.hasConversion)return-1;if($!==le)return $-le;if(x){if(!I)return 1}else if(I)return-1;var ie=(y.length-b.length)*(x?-1:1);if(ie!==0)return ie;for(var Ne=[],ge=0,me=0;me<y.length;++me){var $e=W(y[me],b[me]);Ne.push($e),ge+=$e}if(ge!==0)return ge;for(var Fe,je=0,ct=Ne;je<ct.length;je++)if(Fe=ct[je],Fe!==0)return Fe;return 0}function se(m){if(m.length===0)return[];var A=m.map(h);m.length>1&&A.sort(function(P,$){return P.index-$.index});var y=A[0].conversionsTo;if(m.length===1)return y;y=y.concat([]);for(var b=new Set(m),O=1;O<A.length;++O){var T=void 0,x=be(A[O].conversionsTo),I;try{for(x.s();!(I=x.n()).done;)T=I.value,b.has(T.from)||(y.push(T),b.add(T.from))}catch(P){x.e(P)}finally{x.f()}}return y}function ve(m,A){var y=A;if(m.some(function(I){return I.hasConversion})){var b=N(m),O=m.map(G);y=function(){for(var P=[],$=b?arguments.length-1:arguments.length,V=0;V<$;V++)P[V]=O[V](arguments[V]);return b&&(P[$]=arguments[$].map(O[$])),A.apply(this,P)}}var T=y;if(N(m)){var x=m.length-1;T=function(){return y.apply(this,kt(arguments,0,x).concat([kt(arguments,x)]))}}return T}function G(m){var A,y,b,O,T=[],x=[];switch(m.types.forEach(function(I){I.conversion&&(T.push(h(I.conversion.from).test),x.push(I.conversion.convert))}),x.length){case 0:return function(P){return P};case 1:return A=T[0],b=x[0],function(P){return A(P)?b(P):P};case 2:return A=T[0],y=T[1],b=x[0],O=x[1],function(P){return A(P)?b(P):y(P)?O(P):P};default:return function(P){for(var $=0;$<x.length;$++)if(T[$](P))return x[$](P);return P}}}function ye(m){function A(y,b,O){if(b<y.length){var T=y[b],x=[];if(T.restParam){var I=T.types.filter(z);I.length<T.types.length&&x.push({types:I,name:"..."+I.map(function(P){return P.name}).join("|"),hasAny:I.some(function(P){return P.isAny}),hasConversion:!1,restParam:!0}),x.push(T)}else x=T.types.map(function(P){return{types:[P],name:P.name,hasAny:P.isAny,hasConversion:P.conversion,restParam:!1}});return dn(x,function(P){return A(y,b+1,O.concat([P]))})}else return[O]}return A(m,0,[])}function Pt(m,A){for(var y=Math.max(m.length,A.length),b=0;b<y;b++){var O=_(m,b),T=_(A,b),x=!1,I=void 0,P=be(T),$;try{for(P.s();!($=P.n()).done;)if(I=$.value,O.has(I)){x=!0;break}}catch(le){P.e(le)}finally{P.f()}if(!x)return!1}var V=m.length,R=A.length,de=N(m),ae=N(A);return de?ae?V===R:R>=V:ae?V>=R:V===R}function ir(m){return m.map(function(A){return hr(A)?fr(A.referToSelf.callback):cr(A)?ar(A.referTo.references,A.referTo.callback):A})}function Ze(m,A,y){var b=[],O,T=be(m),x;try{for(T.s();!(x=T.n()).done;){O=x.value;var I=y[O];if(typeof I!="number")throw new TypeError('No definition for referenced signature "'+O+'"');if(I=A[I],typeof I!="function")return!1;b.push(I)}}catch(P){T.e(P)}finally{T.f()}return b}function ft(m,A,y){for(var b=ir(m),O=new Array(b.length).fill(!1),T=!0;T;){T=!1;for(var x=!0,I=0;I<b.length;++I)if(!O[I]){var P=b[I];if(hr(P))b[I]=P.referToSelf.callback(y),b[I].referToSelf=P.referToSelf,O[I]=!0,x=!1;else if(cr(P)){var $=Ze(P.referTo.references,b,A);$?(b[I]=P.referTo.callback.apply(this,$),b[I].referTo=P.referTo,O[I]=!0,x=!1):T=!0}}if(x&&T)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return b}function xt(m){var A=/\bthis(\(|\.signatures\b)/;Object.keys(m).forEach(function(y){var b=m[y];if(A.test(b.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function pn(m,A){if(s.createCount++,Object.keys(A).length===0)throw new SyntaxError("No signatures provided");s.warnAgainstDeprecatedThis&&xt(A);var y=[],b=[],O={},T=[],x,I=function(){if(!Object.prototype.hasOwnProperty.call(A,x))return"continue";var fe=w(x);if(!fe)return"continue";y.forEach(function(Ke){if(Pt(Ke,fe))throw new TypeError('Conflicting signatures "'+d(Ke)+'" and "'+d(fe)+'".')}),y.push(fe);var pr=b.length;b.push(A[x]);var Kn=fe.map(F),ht=void 0,lt=be(ye(Kn)),vr;try{for(lt.s();!(vr=lt.n()).done;){ht=vr.value;var dr=d(ht);T.push({params:ht,name:dr,fn:pr}),ht.every(function(Ke){return!Ke.hasConversion})&&(O[dr]=pr)}}catch(Ke){lt.e(Ke)}finally{lt.f()}};for(x in A)var P=I();T.sort(H);var $=ft(b,O,it),V;for(V in O)Object.prototype.hasOwnProperty.call(O,V)&&(O[V]=$[O[V]]);for(var R=[],de=new Map,ae=0,le=T;ae<le.length;ae++)V=le[ae],de.has(V.name)||(V.fn=$[V.fn],R.push(V),de.set(V.name,V));for(var re=R[0]&&R[0].params.length<=2&&!N(R[0].params),Ee=R[1]&&R[1].params.length<=2&&!N(R[1].params),ie=R[2]&&R[2].params.length<=2&&!N(R[2].params),Ne=R[3]&&R[3].params.length<=2&&!N(R[3].params),ge=R[4]&&R[4].params.length<=2&&!N(R[4].params),me=R[5]&&R[5].params.length<=2&&!N(R[5].params),$e=re&&Ee&&ie&&Ne&&ge&&me,Fe=0;Fe<R.length;++Fe)R[Fe].test=M(R[Fe].params);for(var je=re?B(R[0].params[0]):_e,ct=Ee?B(R[1].params[0]):_e,nt=ie?B(R[2].params[0]):_e,An=Ne?B(R[3].params[0]):_e,wn=ge?B(R[4].params[0]):_e,Cn=me?B(R[5].params[0]):_e,yn=re?B(R[0].params[1]):_e,Bn=Ee?B(R[1].params[1]):_e,Nn=ie?B(R[2].params[1]):_e,_n=Ne?B(R[3].params[1]):_e,Mn=ge?B(R[4].params[1]):_e,bn=me?B(R[5].params[1]):_e,ut=0;ut<R.length;++ut)R[ut].implementation=ve(R[ut].params,R[ut].fn);var Sn=re?R[0].implementation:We,In=Ee?R[1].implementation:We,On=ie?R[2].implementation:We,Tn=Ne?R[3].implementation:We,Pn=ge?R[4].implementation:We,xn=me?R[5].implementation:We,kn=re?R[0].params.length:-1,Rn=Ee?R[1].params.length:-1,zn=ie?R[2].params.length:-1,qn=Ne?R[3].params.length:-1,Ln=ge?R[4].params.length:-1,Un=me?R[5].params.length:-1,$n=$e?6:0,jn=R.length,Hn=R.map(function(Be){return Be.test}),Zn=R.map(function(Be){return Be.implementation}),Vn=function(){for(var fe=$n;fe<jn;fe++)if(Hn[fe](arguments))return Zn[fe].apply(this,arguments);return s.onMismatch(m,arguments,R)};function it(Be,fe){return arguments.length===kn&&je(Be)&&yn(fe)?Sn.apply(this,arguments):arguments.length===Rn&&ct(Be)&&Bn(fe)?In.apply(this,arguments):arguments.length===zn&&nt(Be)&&Nn(fe)?On.apply(this,arguments):arguments.length===qn&&An(Be)&&_n(fe)?Tn.apply(this,arguments):arguments.length===Ln&&wn(Be)&&Mn(fe)?Pn.apply(this,arguments):arguments.length===Un&&Cn(Be)&&bn(fe)?xn.apply(this,arguments):Vn.apply(this,arguments)}try{Object.defineProperty(it,"name",{value:m})}catch{}return it.signatures=O,it._typedFunctionData={signatures:R,signatureMap:de},it}function or(m,A,y){throw q(m,A,y)}function sr(m){return kt(m,0,m.length-1)}function Ve(m){return m[m.length-1]}function kt(m,A,y){return Array.prototype.slice.call(m,A,y)}function vn(m,A){for(var y=0;y<m.length;y++)if(A(m[y]))return m[y]}function dn(m,A){return Array.prototype.concat.apply([],m.map(A))}function gn(){var m=sr(arguments).map(function(y){return d(w(y))}),A=Ve(arguments);if(typeof A!="function")throw new TypeError("Callback function expected as last argument");return ar(m,A)}function ar(m,A){return{referTo:{references:m,callback:A}}}function fr(m){if(typeof m!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:m}}}function cr(m){return m&&Ge(m.referTo)==="object"&&Array.isArray(m.referTo.references)&&typeof m.referTo.callback=="function"}function hr(m){return m&&Ge(m.referToSelf)==="object"&&typeof m.referToSelf.callback=="function"}function lr(m,A){if(!m)return A;if(A&&A!==m){var y=new Error("Function names do not match (expected: "+m+", actual: "+A+")");throw y.data={actual:A,expected:m},y}return m}function mn(m){var A;for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(f(m[y])||typeof m[y].signature=="string")&&(A=lr(A,m[y].name));return A}function En(m,A){var y;for(y in A)if(Object.prototype.hasOwnProperty.call(A,y)){if(y in m&&A[y]!==m[y]){var b=new Error('Signature "'+y+'" is defined twice');throw b.data={signature:y,sourceFunction:A[y],destFunction:m[y]},b}m[y]=A[y]}}var Fn=s;s=function(A){for(var y=typeof A=="string",b=y?1:0,O=y?A:"",T={},x=b;x<arguments.length;++x){var I=arguments[x],P={},$=void 0;if(typeof I=="function"?($=I.name,typeof I.signature=="string"?P[I.signature]=I:f(I)&&(P=I.signatures)):e(I)&&(P=I,y||($=mn(I))),Object.keys(P).length===0){var V=new TypeError("Argument to 'typed' at index "+x+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw V.data={index:x,argument:I},V}y||(O=lr(O,$)),En(T,P)}return pn(O||"",T)},s.create=Lr,s.createCount=Fn.createCount,s.onMismatch=or,s.throwMismatchError=or,s.createError=q,s.clear=p,s.clearConversions=a,s.addTypes=D,s._findType=h,s.referTo=gn,s.referToSelf=fr,s.convert=c,s.findSignature=l,s.find=g,s.isTypedFunction=f,s.warnAgainstDeprecatedThis=!0,s.addType=function(m,A){var y="any";A!==!1&&u.has("Object")&&(y="Object"),s.addTypes([m],y)};function Dr(m){if(!m||typeof m.from!="string"||typeof m.to!="string"||typeof m.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(m.to===m.from)throw new SyntaxError('Illegal to define conversion from "'+m.from+'" to itself.')}return s.addConversion=function(m){Dr(m);var A=h(m.to);if(A.conversionsTo.every(function(y){return y.from!==m.from}))A.conversionsTo.push({from:m.from,convert:m.convert,index:i++});else throw new Error('There is already a conversion from "'+m.from+'" to "'+A.name+'"')},s.addConversions=function(m){m.forEach(s.addConversion)},s.removeConversion=function(m){Dr(m);var A=h(m.to),y=vn(A.conversionsTo,function(O){return O.from===m.from});if(!y)throw new Error("Attempt to remove nonexistent conversion from "+m.from+" to "+m.to);if(y.convert!==m.convert)throw new Error("Conversion to remove does not match existing conversion");var b=A.conversionsTo.indexOf(y);A.conversionsTo.splice(b,1)},s.resolve=function(m,A){if(!f(m))throw new TypeError(Ar);for(var y=m._typedFunctionData.signatures,b=0;b<y.length;++b)if(y[b].test(A))return y[b];return null},s}const wr=Lr();function oe(e){return typeof e=="boolean"?!0:isFinite(e)?e===Math.round(e):!1}function zt(e,t,r){var u={2:"0b",8:"0o",16:"0x"},n=u[t],i="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!oe(r))throw new Error("size must be an integer");if(e>2**(r-1)-1||e<-(2**(r-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!oe(e))throw new Error("Value must be an integer");e<0&&(e=e+2**r),i="i".concat(r)}var s="";return e<0&&(e=-e,s="-"),"".concat(s).concat(n).concat(e.toString(t)).concat(i)}function Ht(e,t){if(typeof t=="function")return t(e);if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(isNaN(e))return"NaN";var r="auto",u,n;if(t&&(t.notation&&(r=t.notation),ee(t)?u=t:ee(t.precision)&&(u=t.precision),t.wordSize&&(n=t.wordSize,typeof n!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return zu(e,u);case"exponential":return Ur(e,u);case"engineering":return Ru(e,u);case"bin":return zt(e,2,n);case"oct":return zt(e,8,n);case"hex":return zt(e,16,n);case"auto":return qu(e,u,t&&t).replace(/((\.\d*?)(0+))($|e)/,function(){var i=arguments[2],s=arguments[4];return i!=="."?i+s:s});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function bt(e){var t=String(e).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!t)throw new SyntaxError("Invalid number "+e);var r=t[1],u=t[2],n=parseFloat(t[4]||"0"),i=u.indexOf(".");n+=i!==-1?i-1:u.length-1;var s=u.replace(".","").replace(/^0*/,function(h){return n-=h.length,""}).replace(/0*$/,"").split("").map(function(h){return parseInt(h)});return s.length===0&&(s.push(0),n++),{sign:r,coefficients:s,exponent:n}}function Ru(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=bt(e),u=St(r,t),n=u.exponent,i=u.coefficients,s=n%3===0?n:n<0?n-3-n%3:n-n%3;if(ee(t))for(;t>i.length||n-s+1>i.length;)i.push(0);else for(var h=Math.abs(n-s)-(i.length-1),D=0;D<h;D++)i.push(0);for(var p=Math.abs(n-s),a=1;p>0;)a++,p--;var o=i.slice(a).join(""),f=ee(t)&&o.length||o.match(/[1-9]/)?"."+o:"",l=i.slice(0,a).join("")+f+"e"+(n>=0?"+":"")+s.toString();return u.sign+l}function zu(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=bt(e),u=typeof t=="number"?St(r,r.exponent+1+t):r,n=u.coefficients,i=u.exponent+1,s=i+(t||0);return n.length<s&&(n=n.concat(Xe(s-n.length))),i<0&&(n=Xe(-i+1).concat(n),i=1),i<n.length&&n.splice(i,0,i===0?"0.":"."),u.sign+n.join("")}function Ur(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=bt(e),u=t?St(r,t):r,n=u.coefficients,i=u.exponent;n.length<t&&(n=n.concat(Xe(t-n.length)));var s=n.shift();return u.sign+s+(n.length>0?"."+n.join(""):"")+"e"+(i>=0?"+":"")+i}function qu(e,t,r){if(isNaN(e)||!isFinite(e))return String(e);var u=r&&r.lowerExp!==void 0?r.lowerExp:-3,n=r&&r.upperExp!==void 0?r.upperExp:5,i=bt(e),s=t?St(i,t):i;if(s.exponent<u||s.exponent>=n)return Ur(e,t);var h=s.coefficients,D=s.exponent;h.length<t&&(h=h.concat(Xe(t-h.length))),h=h.concat(Xe(D-h.length+1+(h.length<t?t-h.length:0))),h=Xe(-D).concat(h);var p=D>0?D:0;return p<h.length-1&&h.splice(p+1,0,"."),s.sign+h.join("")}function St(e,t){for(var r={sign:e.sign,coefficients:e.coefficients,exponent:e.exponent},u=r.coefficients;t<=0;)u.unshift(0),r.exponent++,t++;if(u.length>t){var n=u.splice(t,u.length-t);if(n[0]>=5){var i=t-1;for(u[i]++;u[i]===10;)u.pop(),i===0&&(u.unshift(0),r.exponent++,i++),i--,u[i]++}}return r}function Xe(e){for(var t=[],r=0;r<e;r++)t.push(0);return t}function Lu(e){return e.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var Uu=Number.EPSILON||2220446049250313e-31;function At(e,t,r){if(r==null)return e===t;if(e===t)return!0;if(isNaN(e)||isNaN(t))return!1;if(isFinite(e)&&isFinite(t)){var u=Math.abs(e-t);return u<Uu?!0:u<=Math.max(Math.abs(e),Math.abs(t))*r}return!1}function qt(e,t,r){var u=e.constructor,n=new u(2),i="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!oe(r))throw new Error("size must be an integer");if(e.greaterThan(n.pow(r-1).sub(1))||e.lessThan(n.pow(r-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!e.isInteger())throw new Error("Value must be an integer");e.lessThan(0)&&(e=e.add(n.pow(r))),i="i".concat(r)}switch(t){case 2:return"".concat(e.toBinary()).concat(i);case 8:return"".concat(e.toOctal()).concat(i);case 16:return"".concat(e.toHexadecimal()).concat(i);default:throw new Error("Base ".concat(t," not supported "))}}function $u(e,t){if(typeof t=="function")return t(e);if(!e.isFinite())return e.isNaN()?"NaN":e.gt(0)?"Infinity":"-Infinity";var r="auto",u,n;if(t!==void 0&&(t.notation&&(r=t.notation),typeof t=="number"?u=t:t.precision&&(u=t.precision),t.wordSize&&(n=t.wordSize,typeof n!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return Hu(e,u);case"exponential":return Cr(e,u);case"engineering":return ju(e,u);case"bin":return qt(e,2,n);case"oct":return qt(e,8,n);case"hex":return qt(e,16,n);case"auto":{var i=t&&t.lowerExp!==void 0?t.lowerExp:-3,s=t&&t.upperExp!==void 0?t.upperExp:5;if(e.isZero())return"0";var h,D=e.toSignificantDigits(u),p=D.e;return p>=i&&p<s?h=D.toFixed():h=Cr(e,u),h.replace(/((\.\d*?)(0+))($|e)/,function(){var a=arguments[2],o=arguments[4];return a!=="."?a+o:o})}default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function ju(e,t){var r=e.e,u=r%3===0?r:r<0?r-3-r%3:r-r%3,n=e.mul(Math.pow(10,-u)),i=n.toPrecision(t);return i.indexOf("e")!==-1&&(i=n.toString()),i+"e"+(r>=0?"+":"")+u.toString()}function Cr(e,t){return t!==void 0?e.toExponential(t-1):e.toExponential()}function Hu(e,t){return e.toFixed(t)}function Ae(e,t){var r=Zu(e,t);return t&&typeof t=="object"&&"truncate"in t&&r.length>t.truncate?r.substring(0,t.truncate-3)+"...":r}function Zu(e,t){if(typeof e=="number")return Ht(e,t);if(Me(e))return $u(e,t);if(Vu(e))return!t||t.fraction!=="decimal"?e.s*e.n+"/"+e.d:e.toString();if(Array.isArray(e))return $r(e,t);if(Oe(e))return'"'+e+'"';if(typeof e=="function")return e.syntax?String(e.syntax):"function";if(e&&typeof e=="object"){if(typeof e.format=="function")return e.format(t);if(e&&e.toString(t)!=={}.toString())return e.toString(t);var r=Object.keys(e).map(u=>'"'+u+'": '+Ae(e[u],t));return"{"+r.join(", ")+"}"}return String(e)}function $r(e,t){if(Array.isArray(e)){for(var r="[",u=e.length,n=0;n<u;n++)n!==0&&(r+=", "),r+=$r(e[n],t);return r+="]",r}else return Ae(e,t)}function Vu(e){return e&&typeof e=="object"&&typeof e.s=="number"&&typeof e.n=="number"&&typeof e.d=="number"||!1}function Q(e,t,r){if(!(this instanceof Q))throw new SyntaxError("Constructor must be called with the new operator");this.actual=e,this.expected=t,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(e)?"["+e.join(", ")+"]":e)+" "+(this.relation||"!=")+" "+(Array.isArray(t)?"["+t.join(", ")+"]":t)+")",this.stack=new Error().stack}Q.prototype=new RangeError;Q.prototype.constructor=RangeError;Q.prototype.name="DimensionError";Q.prototype.isDimensionError=!0;function tt(e,t,r){if(!(this instanceof tt))throw new SyntaxError("Constructor must be called with the new operator");this.index=e,arguments.length<3?(this.min=0,this.max=t):(this.min=t,this.max=r),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}tt.prototype=new RangeError;tt.prototype.constructor=RangeError;tt.prototype.name="IndexError";tt.prototype.isIndexError=!0;function wt(e){for(var t=[];Array.isArray(e);)t.push(e.length),e=e[0];return t}function jr(e,t,r){var u,n=e.length;if(n!==t[r])throw new Q(n,t[r]);if(r<t.length-1){var i=r+1;for(u=0;u<n;u++){var s=e[u];if(!Array.isArray(s))throw new Q(t.length-1,t.length,"<");jr(e[u],t,i)}}else for(u=0;u<n;u++)if(Array.isArray(e[u]))throw new Q(t.length+1,t.length,">")}function yr(e,t){var r=t.length===0;if(r){if(Array.isArray(e))throw new Q(e.length,0)}else jr(e,t,0)}function X(e,t){if(!ee(e)||!oe(e))throw new TypeError("Index must be an integer (value: "+e+")");if(e<0||typeof t=="number"&&e>=t)throw new tt(e,t)}function Zt(e,t,r){if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new Error("Resizing to scalar is not supported");t.forEach(function(n){if(!ee(n)||!oe(n)||n<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Ae(t)+")")});var u=r!==void 0?r:0;return Vt(e,t,0,u),e}function Vt(e,t,r,u){var n,i,s=e.length,h=t[r],D=Math.min(s,h);if(e.length=h,r<t.length-1){var p=r+1;for(n=0;n<D;n++)i=e[n],Array.isArray(i)||(i=[i],e[n]=i),Vt(i,t,p,u);for(n=D;n<h;n++)i=[],e[n]=i,Vt(i,t,p,u)}else{for(n=0;n<D;n++)for(;Array.isArray(e[n]);)e[n]=e[n][0];for(n=D;n<h;n++)e[n]=u}}function Ku(e,t){var r=Kt(e),u=r.length;if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new Q(0,u,"!=");t=tr(t,u);var n=Hr(t);if(u!==n)throw new Q(n,u,"!=");try{return Wu(r,t)}catch(i){throw i instanceof Q?new Q(n,u,"!="):i}}function tr(e,t){var r=Hr(e),u=e.slice(),n=-1,i=e.indexOf(n),s=e.indexOf(n,i+1)>=0;if(s)throw new Error("More than one wildcard in sizes");var h=i>=0,D=t%r===0;if(h)if(D)u[i]=-t/r;else throw new Error("Could not replace wildcard, since "+t+" is no multiple of "+-r);return u}function Hr(e){return e.reduce((t,r)=>t*r,1)}function Wu(e,t){for(var r=e,u,n=t.length-1;n>0;n--){var i=t[n];u=[];for(var s=r.length/i,h=0;h<s;h++)u.push(r.slice(h*i,(h+1)*i));r=u}return r}function Zr(e,t,r,u){var n=u||wt(e);if(r)for(var i=0;i<r;i++)e=[e],n.unshift(1);for(e=Vr(e,t,0);n.length<t;)n.push(1);return e}function Vr(e,t,r){var u,n;if(Array.isArray(e)){var i=r+1;for(u=0,n=e.length;u<n;u++)e[u]=Vr(e[u],t,i)}else for(var s=r;s<t;s++)e=[e];return e}function Kt(e){if(!Array.isArray(e))return e;var t=[];return e.forEach(function r(u){Array.isArray(u)?u.forEach(r):t.push(u)}),t}function Ct(e,t){for(var r,u=0,n=0;n<e.length;n++){var i=e[n],s=Array.isArray(i);if(n===0&&s&&(u=i.length),s&&i.length!==u)return;var h=s?Ct(i,t):t(i);if(r===void 0)r=h;else if(r!==h)return"mixed"}return r}function Ce(e,t,r,u){function n(i){var s=Tu(i,t.map(Ju));return Yu(e,t,i),r(s)}return n.isFactory=!0,n.fn=e,n.dependencies=t.slice().sort(),u&&(n.meta=u),n}function Yu(e,t,r){var u=t.filter(i=>!Gu(i)).every(i=>r[i]!==void 0);if(!u){var n=t.filter(i=>r[i]===void 0);throw new Error('Cannot create function "'.concat(e,'", ')+"some dependencies are missing: ".concat(n.map(i=>'"'.concat(i,'"')).join(", "),"."))}}function Gu(e){return e&&e[0]==="?"}function Ju(e){return e&&e[0]==="?"?e.slice(1):e}function Xu(e,t){if(Wr(e)&&Kr(e,t))return e[t];throw typeof e[t]=="function"&&ti(e,t)?new Error('Cannot access method "'+t+'" as a property'):new Error('No access to property "'+t+'"')}function Qu(e,t,r){if(Wr(e)&&Kr(e,t))return e[t]=r,r;throw new Error('No access to property "'+t+'"')}function ei(e,t){return t in e}function Kr(e,t){return!e||typeof e!="object"?!1:Ft(ri,t)?!0:!(t in Object.prototype||t in Function.prototype)}function ti(e,t){return e==null||typeof e[t]!="function"||Ft(e,t)&&Object.getPrototypeOf&&t in Object.getPrototypeOf(e)?!1:Ft(ni,t)?!0:!(t in Object.prototype||t in Function.prototype)}function Wr(e){return typeof e=="object"&&e&&e.constructor===Object}var ri={length:!0,name:!0},ni={toString:!0,valueOf:!0,toLocaleString:!0};class ui{constructor(t){this.wrappedObject=t}keys(){return Object.keys(this.wrappedObject)}get(t){return Xu(this.wrappedObject,t)}set(t,r){return Qu(this.wrappedObject,t,r),this}has(t){return ei(this.wrappedObject,t)}}function ii(e){return e?e instanceof Map||e instanceof ui||typeof e.set=="function"&&typeof e.get=="function"&&typeof e.keys=="function"&&typeof e.has=="function":!1}var Yr=function(){return Yr=wr.create,wr},oi=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],si=Ce("typed",oi,function(t){var{BigNumber:r,Complex:u,DenseMatrix:n,Fraction:i}=t,s=Yr();return s.clear(),s.addTypes([{name:"number",test:ee},{name:"Complex",test:Rr},{name:"BigNumber",test:Me},{name:"Fraction",test:zr},{name:"Unit",test:qr},{name:"identifier",test:h=>Oe&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])*$/.test(h)},{name:"string",test:Oe},{name:"Chain",test:Iu},{name:"Array",test:J},{name:"Matrix",test:qe},{name:"DenseMatrix",test:nu},{name:"SparseMatrix",test:uu},{name:"Range",test:iu},{name:"Index",test:er},{name:"boolean",test:ou},{name:"ResultSet",test:su},{name:"Help",test:au},{name:"function",test:fu},{name:"Date",test:cu},{name:"RegExp",test:hu},{name:"null",test:Du},{name:"undefined",test:pu},{name:"AccessorNode",test:vu},{name:"ArrayNode",test:du},{name:"AssignmentNode",test:gu},{name:"BlockNode",test:mu},{name:"ConditionalNode",test:Eu},{name:"ConstantNode",test:Fu},{name:"FunctionNode",test:wu},{name:"FunctionAssignmentNode",test:Au},{name:"IndexNode",test:Cu},{name:"Node",test:yu},{name:"ObjectNode",test:Bu},{name:"OperatorNode",test:Nu},{name:"ParenthesisNode",test:_u},{name:"RangeNode",test:Mu},{name:"RelationalNode",test:bu},{name:"SymbolNode",test:Su},{name:"Map",test:ii},{name:"Object",test:lu}]),s.addConversions([{from:"number",to:"BigNumber",convert:function(D){if(r||Lt(D),Lu(D)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+D+"). Use function bignumber(x) to convert to BigNumber.");return new r(D)}},{from:"number",to:"Complex",convert:function(D){return u||pt(D),new u(D,0)}},{from:"BigNumber",to:"Complex",convert:function(D){return u||pt(D),new u(D.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(D){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(D){return u||pt(D),new u(D.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(D){i||Ut(D);var p=new i(D);if(p.valueOf()!==D)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+D+"). Use function fraction(x) to convert to Fraction.");return p}},{from:"string",to:"number",convert:function(D){var p=Number(D);if(isNaN(p))throw new Error('Cannot convert "'+D+'" to a number');return p}},{from:"string",to:"BigNumber",convert:function(D){r||Lt(D);try{return new r(D)}catch{throw new Error('Cannot convert "'+D+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(D){i||Ut(D);try{return new i(D)}catch{throw new Error('Cannot convert "'+D+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(D){u||pt(D);try{return new u(D)}catch{throw new Error('Cannot convert "'+D+'" to Complex')}}},{from:"boolean",to:"number",convert:function(D){return+D}},{from:"boolean",to:"BigNumber",convert:function(D){return r||Lt(D),new r(+D)}},{from:"boolean",to:"Fraction",convert:function(D){return i||Ut(D),new i(+D)}},{from:"boolean",to:"string",convert:function(D){return String(D)}},{from:"Array",to:"Matrix",convert:function(D){return n||ai(),new n(D)}},{from:"Matrix",to:"Array",convert:function(D){return D.valueOf()}}]),s.onMismatch=(h,D,p)=>{var a=s.createError(h,D,p);if(["wrongType","mismatch"].includes(a.data.category)&&D.length===1&&mt(D[0])&&p.some(f=>!f.params.includes(","))){var o=new TypeError("Function '".concat(h,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(h,")'."));throw o.data=a.data,o}throw a},s.onMismatch=(h,D,p)=>{var a=s.createError(h,D,p);if(["wrongType","mismatch"].includes(a.data.category)&&D.length===1&&mt(D[0])&&p.some(f=>!f.params.includes(","))){var o=new TypeError("Function '".concat(h,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(h,")'."));throw o.data=a.data,o}throw a},s});function Lt(e){throw new Error("Cannot convert value ".concat(e," into a BigNumber: no class 'BigNumber' provided"))}function pt(e){throw new Error("Cannot convert value ".concat(e," into a Complex number: no class 'Complex' provided"))}function ai(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function Ut(e){throw new Error("Cannot convert value ".concat(e," into a Fraction, no class 'Fraction' provided."))}/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var Je=9e15,Ue=1e9,Wt="0123456789abcdef",yt="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Bt="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Yt={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Je,maxE:Je,crypto:!1},Gr,ke,Z=!0,It="[DecimalError] ",Le=It+"Invalid argument: ",Jr=It+"Precision limit exceeded",Xr=It+"crypto unavailable",Qr="[object Decimal]",pe=Math.floor,ue=Math.pow,fi=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,ci=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,hi=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,en=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ie=1e7,j=7,li=9007199254740991,Di=yt.length-1,Gt=Bt.length-1,S={toStringTag:Qr};S.absoluteValue=S.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),L(e)};S.ceil=function(){return L(new this.constructor(this),this.e+1,2)};S.clampedTo=S.clamp=function(e,t){var r,u=this,n=u.constructor;if(e=new n(e),t=new n(t),!e.s||!t.s)return new n(NaN);if(e.gt(t))throw Error(Le+t);return r=u.cmp(e),r<0?e:u.cmp(t)>0?t:new n(u)};S.comparedTo=S.cmp=function(e){var t,r,u,n,i=this,s=i.d,h=(e=new i.constructor(e)).d,D=i.s,p=e.s;if(!s||!h)return!D||!p?NaN:D!==p?D:s===h?0:!s^D<0?1:-1;if(!s[0]||!h[0])return s[0]?D:h[0]?-p:0;if(D!==p)return D;if(i.e!==e.e)return i.e>e.e^D<0?1:-1;for(u=s.length,n=h.length,t=0,r=u<n?u:n;t<r;++t)if(s[t]!==h[t])return s[t]>h[t]^D<0?1:-1;return u===n?0:u>n^D<0?1:-1};S.cosine=S.cos=function(){var e,t,r=this,u=r.constructor;return r.d?r.d[0]?(e=u.precision,t=u.rounding,u.precision=e+Math.max(r.e,r.sd())+j,u.rounding=1,r=pi(u,on(u,r)),u.precision=e,u.rounding=t,L(ke==2||ke==3?r.neg():r,e,t,!0)):new u(1):new u(NaN)};S.cubeRoot=S.cbrt=function(){var e,t,r,u,n,i,s,h,D,p,a=this,o=a.constructor;if(!a.isFinite()||a.isZero())return new o(a);for(Z=!1,i=a.s*ue(a.s*a,1/3),!i||Math.abs(i)==1/0?(r=he(a.d),e=a.e,(i=(e-r.length+1)%3)&&(r+=i==1||i==-2?"0":"00"),i=ue(r,1/3),e=pe((e+1)/3)-(e%3==(e<0?-1:2)),i==1/0?r="5e"+e:(r=i.toExponential(),r=r.slice(0,r.indexOf("e")+1)+e),u=new o(r),u.s=a.s):u=new o(i.toString()),s=(e=o.precision)+3;;)if(h=u,D=h.times(h).times(h),p=D.plus(a),u=Y(p.plus(a).times(h),p.plus(D),s+2,1),he(h.d).slice(0,s)===(r=he(u.d)).slice(0,s))if(r=r.slice(s-3,s+1),r=="9999"||!n&&r=="4999"){if(!n&&(L(h,e+1,0),h.times(h).times(h).eq(a))){u=h;break}s+=4,n=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(L(u,e+1,1),t=!u.times(u).times(u).eq(a));break}return Z=!0,L(u,e,o.rounding,t)};S.decimalPlaces=S.dp=function(){var e,t=this.d,r=NaN;if(t){if(e=t.length-1,r=(e-pe(this.e/j))*j,e=t[e],e)for(;e%10==0;e/=10)r--;r<0&&(r=0)}return r};S.dividedBy=S.div=function(e){return Y(this,new this.constructor(e))};S.dividedToIntegerBy=S.divToInt=function(e){var t=this,r=t.constructor;return L(Y(t,new r(e),0,1,1),r.precision,r.rounding)};S.equals=S.eq=function(e){return this.cmp(e)===0};S.floor=function(){return L(new this.constructor(this),this.e+1,3)};S.greaterThan=S.gt=function(e){return this.cmp(e)>0};S.greaterThanOrEqualTo=S.gte=function(e){var t=this.cmp(e);return t==1||t===0};S.hyperbolicCosine=S.cosh=function(){var e,t,r,u,n,i=this,s=i.constructor,h=new s(1);if(!i.isFinite())return new s(i.s?1/0:NaN);if(i.isZero())return h;r=s.precision,u=s.rounding,s.precision=r+Math.max(i.e,i.sd())+4,s.rounding=1,n=i.d.length,n<32?(e=Math.ceil(n/3),t=(1/Tt(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),i=Qe(s,1,i.times(t),new s(1),!0);for(var D,p=e,a=new s(8);p--;)D=i.times(i),i=h.minus(D.times(a.minus(D.times(a))));return L(i,s.precision=r,s.rounding=u,!0)};S.hyperbolicSine=S.sinh=function(){var e,t,r,u,n=this,i=n.constructor;if(!n.isFinite()||n.isZero())return new i(n);if(t=i.precision,r=i.rounding,i.precision=t+Math.max(n.e,n.sd())+4,i.rounding=1,u=n.d.length,u<3)n=Qe(i,2,n,n,!0);else{e=1.4*Math.sqrt(u),e=e>16?16:e|0,n=n.times(1/Tt(5,e)),n=Qe(i,2,n,n,!0);for(var s,h=new i(5),D=new i(16),p=new i(20);e--;)s=n.times(n),n=n.times(h.plus(s.times(D.times(s).plus(p))))}return i.precision=t,i.rounding=r,L(n,t,r,!0)};S.hyperbolicTangent=S.tanh=function(){var e,t,r=this,u=r.constructor;return r.isFinite()?r.isZero()?new u(r):(e=u.precision,t=u.rounding,u.precision=e+7,u.rounding=1,Y(r.sinh(),r.cosh(),u.precision=e,u.rounding=t)):new u(r.s)};S.inverseCosine=S.acos=function(){var e,t=this,r=t.constructor,u=t.abs().cmp(1),n=r.precision,i=r.rounding;return u!==-1?u===0?t.isNeg()?Se(r,n,i):new r(0):new r(NaN):t.isZero()?Se(r,n+4,i).times(.5):(r.precision=n+6,r.rounding=1,t=t.asin(),e=Se(r,n+4,i).times(.5),r.precision=n,r.rounding=i,e.minus(t))};S.inverseHyperbolicCosine=S.acosh=function(){var e,t,r=this,u=r.constructor;return r.lte(1)?new u(r.eq(1)?0:NaN):r.isFinite()?(e=u.precision,t=u.rounding,u.precision=e+Math.max(Math.abs(r.e),r.sd())+4,u.rounding=1,Z=!1,r=r.times(r).minus(1).sqrt().plus(r),Z=!0,u.precision=e,u.rounding=t,r.ln()):new u(r)};S.inverseHyperbolicSine=S.asinh=function(){var e,t,r=this,u=r.constructor;return!r.isFinite()||r.isZero()?new u(r):(e=u.precision,t=u.rounding,u.precision=e+2*Math.max(Math.abs(r.e),r.sd())+6,u.rounding=1,Z=!1,r=r.times(r).plus(1).sqrt().plus(r),Z=!0,u.precision=e,u.rounding=t,r.ln())};S.inverseHyperbolicTangent=S.atanh=function(){var e,t,r,u,n=this,i=n.constructor;return n.isFinite()?n.e>=0?new i(n.abs().eq(1)?n.s/0:n.isZero()?n:NaN):(e=i.precision,t=i.rounding,u=n.sd(),Math.max(u,e)<2*-n.e-1?L(new i(n),e,t,!0):(i.precision=r=u-n.e,n=Y(n.plus(1),new i(1).minus(n),r+e,1),i.precision=e+4,i.rounding=1,n=n.ln(),i.precision=e,i.rounding=t,n.times(.5))):new i(NaN)};S.inverseSine=S.asin=function(){var e,t,r,u,n=this,i=n.constructor;return n.isZero()?new i(n):(t=n.abs().cmp(1),r=i.precision,u=i.rounding,t!==-1?t===0?(e=Se(i,r+4,u).times(.5),e.s=n.s,e):new i(NaN):(i.precision=r+6,i.rounding=1,n=n.div(new i(1).minus(n.times(n)).sqrt().plus(1)).atan(),i.precision=r,i.rounding=u,n.times(2)))};S.inverseTangent=S.atan=function(){var e,t,r,u,n,i,s,h,D,p=this,a=p.constructor,o=a.precision,f=a.rounding;if(p.isFinite()){if(p.isZero())return new a(p);if(p.abs().eq(1)&&o+4<=Gt)return s=Se(a,o+4,f).times(.25),s.s=p.s,s}else{if(!p.s)return new a(NaN);if(o+4<=Gt)return s=Se(a,o+4,f).times(.5),s.s=p.s,s}for(a.precision=h=o+10,a.rounding=1,r=Math.min(28,h/j+2|0),e=r;e;--e)p=p.div(p.times(p).plus(1).sqrt().plus(1));for(Z=!1,t=Math.ceil(h/j),u=1,D=p.times(p),s=new a(p),n=p;e!==-1;)if(n=n.times(D),i=s.minus(n.div(u+=2)),n=n.times(D),s=i.plus(n.div(u+=2)),s.d[t]!==void 0)for(e=t;s.d[e]===i.d[e]&&e--;);return r&&(s=s.times(2<<r-1)),Z=!0,L(s,a.precision=o,a.rounding=f,!0)};S.isFinite=function(){return!!this.d};S.isInteger=S.isInt=function(){return!!this.d&&pe(this.e/j)>this.d.length-2};S.isNaN=function(){return!this.s};S.isNegative=S.isNeg=function(){return this.s<0};S.isPositive=S.isPos=function(){return this.s>0};S.isZero=function(){return!!this.d&&this.d[0]===0};S.lessThan=S.lt=function(e){return this.cmp(e)<0};S.lessThanOrEqualTo=S.lte=function(e){return this.cmp(e)<1};S.logarithm=S.log=function(e){var t,r,u,n,i,s,h,D,p=this,a=p.constructor,o=a.precision,f=a.rounding,l=5;if(e==null)e=new a(10),t=!0;else{if(e=new a(e),r=e.d,e.s<0||!r||!r[0]||e.eq(1))return new a(NaN);t=e.eq(10)}if(r=p.d,p.s<0||!r||!r[0]||p.eq(1))return new a(r&&!r[0]?-1/0:p.s!=1?NaN:r?0:1/0);if(t)if(r.length>1)i=!0;else{for(n=r[0];n%10===0;)n/=10;i=n!==1}if(Z=!1,h=o+l,s=ze(p,h),u=t?Nt(a,h+10):ze(e,h),D=Y(s,u,h,1),at(D.d,n=o,f))do if(h+=10,s=ze(p,h),u=t?Nt(a,h+10):ze(e,h),D=Y(s,u,h,1),!i){+he(D.d).slice(n+1,n+15)+1==1e14&&(D=L(D,o+1,0));break}while(at(D.d,n+=10,f));return Z=!0,L(D,o,f)};S.minus=S.sub=function(e){var t,r,u,n,i,s,h,D,p,a,o,f,l=this,g=l.constructor;if(e=new g(e),!l.d||!e.d)return!l.s||!e.s?e=new g(NaN):l.d?e.s=-e.s:e=new g(e.d||l.s!==e.s?l:NaN),e;if(l.s!=e.s)return e.s=-e.s,l.plus(e);if(p=l.d,f=e.d,h=g.precision,D=g.rounding,!p[0]||!f[0]){if(f[0])e.s=-e.s;else if(p[0])e=new g(l);else return new g(D===3?-0:0);return Z?L(e,h,D):e}if(r=pe(e.e/j),a=pe(l.e/j),p=p.slice(),i=a-r,i){for(o=i<0,o?(t=p,i=-i,s=f.length):(t=f,r=a,s=p.length),u=Math.max(Math.ceil(h/j),s)+2,i>u&&(i=u,t.length=1),t.reverse(),u=i;u--;)t.push(0);t.reverse()}else{for(u=p.length,s=f.length,o=u<s,o&&(s=u),u=0;u<s;u++)if(p[u]!=f[u]){o=p[u]<f[u];break}i=0}for(o&&(t=p,p=f,f=t,e.s=-e.s),s=p.length,u=f.length-s;u>0;--u)p[s++]=0;for(u=f.length;u>i;){if(p[--u]<f[u]){for(n=u;n&&p[--n]===0;)p[n]=Ie-1;--p[n],p[u]+=Ie}p[u]-=f[u]}for(;p[--s]===0;)p.pop();for(;p[0]===0;p.shift())--r;return p[0]?(e.d=p,e.e=Ot(p,r),Z?L(e,h,D):e):new g(D===3?-0:0)};S.modulo=S.mod=function(e){var t,r=this,u=r.constructor;return e=new u(e),!r.d||!e.s||e.d&&!e.d[0]?new u(NaN):!e.d||r.d&&!r.d[0]?L(new u(r),u.precision,u.rounding):(Z=!1,u.modulo==9?(t=Y(r,e.abs(),0,3,1),t.s*=e.s):t=Y(r,e,0,u.modulo,1),t=t.times(e),Z=!0,r.minus(t))};S.naturalExponential=S.exp=function(){return Jt(this)};S.naturalLogarithm=S.ln=function(){return ze(this)};S.negated=S.neg=function(){var e=new this.constructor(this);return e.s=-e.s,L(e)};S.plus=S.add=function(e){var t,r,u,n,i,s,h,D,p,a,o=this,f=o.constructor;if(e=new f(e),!o.d||!e.d)return!o.s||!e.s?e=new f(NaN):o.d||(e=new f(e.d||o.s===e.s?o:NaN)),e;if(o.s!=e.s)return e.s=-e.s,o.minus(e);if(p=o.d,a=e.d,h=f.precision,D=f.rounding,!p[0]||!a[0])return a[0]||(e=new f(o)),Z?L(e,h,D):e;if(i=pe(o.e/j),u=pe(e.e/j),p=p.slice(),n=i-u,n){for(n<0?(r=p,n=-n,s=a.length):(r=a,u=i,s=p.length),i=Math.ceil(h/j),s=i>s?i+1:s+1,n>s&&(n=s,r.length=1),r.reverse();n--;)r.push(0);r.reverse()}for(s=p.length,n=a.length,s-n<0&&(n=s,r=a,a=p,p=r),t=0;n;)t=(p[--n]=p[n]+a[n]+t)/Ie|0,p[n]%=Ie;for(t&&(p.unshift(t),++u),s=p.length;p[--s]==0;)p.pop();return e.d=p,e.e=Ot(p,u),Z?L(e,h,D):e};S.precision=S.sd=function(e){var t,r=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Le+e);return r.d?(t=tn(r.d),e&&r.e+1>t&&(t=r.e+1)):t=NaN,t};S.round=function(){var e=this,t=e.constructor;return L(new t(e),e.e+1,t.rounding)};S.sine=S.sin=function(){var e,t,r=this,u=r.constructor;return r.isFinite()?r.isZero()?new u(r):(e=u.precision,t=u.rounding,u.precision=e+Math.max(r.e,r.sd())+j,u.rounding=1,r=di(u,on(u,r)),u.precision=e,u.rounding=t,L(ke>2?r.neg():r,e,t,!0)):new u(NaN)};S.squareRoot=S.sqrt=function(){var e,t,r,u,n,i,s=this,h=s.d,D=s.e,p=s.s,a=s.constructor;if(p!==1||!h||!h[0])return new a(!p||p<0&&(!h||h[0])?NaN:h?s:1/0);for(Z=!1,p=Math.sqrt(+s),p==0||p==1/0?(t=he(h),(t.length+D)%2==0&&(t+="0"),p=Math.sqrt(t),D=pe((D+1)/2)-(D<0||D%2),p==1/0?t="5e"+D:(t=p.toExponential(),t=t.slice(0,t.indexOf("e")+1)+D),u=new a(t)):u=new a(p.toString()),r=(D=a.precision)+3;;)if(i=u,u=i.plus(Y(s,i,r+2,1)).times(.5),he(i.d).slice(0,r)===(t=he(u.d)).slice(0,r))if(t=t.slice(r-3,r+1),t=="9999"||!n&&t=="4999"){if(!n&&(L(i,D+1,0),i.times(i).eq(s))){u=i;break}r+=4,n=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(L(u,D+1,1),e=!u.times(u).eq(s));break}return Z=!0,L(u,D,a.rounding,e)};S.tangent=S.tan=function(){var e,t,r=this,u=r.constructor;return r.isFinite()?r.isZero()?new u(r):(e=u.precision,t=u.rounding,u.precision=e+10,u.rounding=1,r=r.sin(),r.s=1,r=Y(r,new u(1).minus(r.times(r)).sqrt(),e+10,0),u.precision=e,u.rounding=t,L(ke==2||ke==4?r.neg():r,e,t,!0)):new u(NaN)};S.times=S.mul=function(e){var t,r,u,n,i,s,h,D,p,a=this,o=a.constructor,f=a.d,l=(e=new o(e)).d;if(e.s*=a.s,!f||!f[0]||!l||!l[0])return new o(!e.s||f&&!f[0]&&!l||l&&!l[0]&&!f?NaN:!f||!l?e.s/0:e.s*0);for(r=pe(a.e/j)+pe(e.e/j),D=f.length,p=l.length,D<p&&(i=f,f=l,l=i,s=D,D=p,p=s),i=[],s=D+p,u=s;u--;)i.push(0);for(u=p;--u>=0;){for(t=0,n=D+u;n>u;)h=i[n]+l[u]*f[n-u-1]+t,i[n--]=h%Ie|0,t=h/Ie|0;i[n]=(i[n]+t)%Ie|0}for(;!i[--s];)i.pop();return t?++r:i.shift(),e.d=i,e.e=Ot(i,r),Z?L(e,o.precision,o.rounding):e};S.toBinary=function(e,t){return rr(this,2,e,t)};S.toDecimalPlaces=S.toDP=function(e,t){var r=this,u=r.constructor;return r=new u(r),e===void 0?r:(we(e,0,Ue),t===void 0?t=u.rounding:we(t,0,8),L(r,e+r.e+1,t))};S.toExponential=function(e,t){var r,u=this,n=u.constructor;return e===void 0?r=Te(u,!0):(we(e,0,Ue),t===void 0?t=n.rounding:we(t,0,8),u=L(new n(u),e+1,t),r=Te(u,!0,e+1)),u.isNeg()&&!u.isZero()?"-"+r:r};S.toFixed=function(e,t){var r,u,n=this,i=n.constructor;return e===void 0?r=Te(n):(we(e,0,Ue),t===void 0?t=i.rounding:we(t,0,8),u=L(new i(n),e+n.e+1,t),r=Te(u,!1,e+u.e+1)),n.isNeg()&&!n.isZero()?"-"+r:r};S.toFraction=function(e){var t,r,u,n,i,s,h,D,p,a,o,f,l=this,g=l.d,c=l.constructor;if(!g)return new c(l);if(p=r=new c(1),u=D=new c(0),t=new c(u),i=t.e=tn(g)-l.e-1,s=i%j,t.d[0]=ue(10,s<0?j+s:s),e==null)e=i>0?t:p;else{if(h=new c(e),!h.isInt()||h.lt(p))throw Error(Le+h);e=h.gt(t)?i>0?t:p:h}for(Z=!1,h=new c(he(g)),a=c.precision,c.precision=i=g.length*j*2;o=Y(h,t,0,1,1),n=r.plus(o.times(u)),n.cmp(e)!=1;)r=u,u=n,n=p,p=D.plus(o.times(n)),D=n,n=t,t=h.minus(o.times(n)),h=n;return n=Y(e.minus(r),u,0,1,1),D=D.plus(n.times(p)),r=r.plus(n.times(u)),D.s=p.s=l.s,f=Y(p,u,i,1).minus(l).abs().cmp(Y(D,r,i,1).minus(l).abs())<1?[p,u]:[D,r],c.precision=a,Z=!0,f};S.toHexadecimal=S.toHex=function(e,t){return rr(this,16,e,t)};S.toNearest=function(e,t){var r=this,u=r.constructor;if(r=new u(r),e==null){if(!r.d)return r;e=new u(1),t=u.rounding}else{if(e=new u(e),t===void 0?t=u.rounding:we(t,0,8),!r.d)return e.s?r:e;if(!e.d)return e.s&&(e.s=r.s),e}return e.d[0]?(Z=!1,r=Y(r,e,0,t,1).times(e),Z=!0,L(r)):(e.s=r.s,r=e),r};S.toNumber=function(){return+this};S.toOctal=function(e,t){return rr(this,8,e,t)};S.toPower=S.pow=function(e){var t,r,u,n,i,s,h=this,D=h.constructor,p=+(e=new D(e));if(!h.d||!e.d||!h.d[0]||!e.d[0])return new D(ue(+h,p));if(h=new D(h),h.eq(1))return h;if(u=D.precision,i=D.rounding,e.eq(1))return L(h,u,i);if(t=pe(e.e/j),t>=e.d.length-1&&(r=p<0?-p:p)<=li)return n=rn(D,h,r,u),e.s<0?new D(1).div(n):L(n,u,i);if(s=h.s,s<0){if(t<e.d.length-1)return new D(NaN);if(e.d[t]&1||(s=1),h.e==0&&h.d[0]==1&&h.d.length==1)return h.s=s,h}return r=ue(+h,p),t=r==0||!isFinite(r)?pe(p*(Math.log("0."+he(h.d))/Math.LN10+h.e+1)):new D(r+"").e,t>D.maxE+1||t<D.minE-1?new D(t>0?s/0:0):(Z=!1,D.rounding=h.s=1,r=Math.min(12,(t+"").length),n=Jt(e.times(ze(h,u+r)),u),n.d&&(n=L(n,u+5,1),at(n.d,u,i)&&(t=u+10,n=L(Jt(e.times(ze(h,t+r)),t),t+5,1),+he(n.d).slice(u+1,u+15)+1==1e14&&(n=L(n,u+1,0)))),n.s=s,Z=!0,D.rounding=i,L(n,u,i))};S.toPrecision=function(e,t){var r,u=this,n=u.constructor;return e===void 0?r=Te(u,u.e<=n.toExpNeg||u.e>=n.toExpPos):(we(e,1,Ue),t===void 0?t=n.rounding:we(t,0,8),u=L(new n(u),e,t),r=Te(u,e<=u.e||u.e<=n.toExpNeg,e)),u.isNeg()&&!u.isZero()?"-"+r:r};S.toSignificantDigits=S.toSD=function(e,t){var r=this,u=r.constructor;return e===void 0?(e=u.precision,t=u.rounding):(we(e,1,Ue),t===void 0?t=u.rounding:we(t,0,8)),L(new u(r),e,t)};S.toString=function(){var e=this,t=e.constructor,r=Te(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+r:r};S.truncated=S.trunc=function(){return L(new this.constructor(this),this.e+1,1)};S.valueOf=S.toJSON=function(){var e=this,t=e.constructor,r=Te(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+r:r};function he(e){var t,r,u,n=e.length-1,i="",s=e[0];if(n>0){for(i+=s,t=1;t<n;t++)u=e[t]+"",r=j-u.length,r&&(i+=Re(r)),i+=u;s=e[t],u=s+"",r=j-u.length,r&&(i+=Re(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return i+s}function we(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Le+e)}function at(e,t,r,u){var n,i,s,h;for(i=e[0];i>=10;i/=10)--t;return--t<0?(t+=j,n=0):(n=Math.ceil((t+1)/j),t%=j),i=ue(10,j-t),h=e[n]%i|0,u==null?t<3?(t==0?h=h/100|0:t==1&&(h=h/10|0),s=r<4&&h==99999||r>3&&h==49999||h==5e4||h==0):s=(r<4&&h+1==i||r>3&&h+1==i/2)&&(e[n+1]/i/100|0)==ue(10,t-2)-1||(h==i/2||h==0)&&(e[n+1]/i/100|0)==0:t<4?(t==0?h=h/1e3|0:t==1?h=h/100|0:t==2&&(h=h/10|0),s=(u||r<4)&&h==9999||!u&&r>3&&h==4999):s=((u||r<4)&&h+1==i||!u&&r>3&&h+1==i/2)&&(e[n+1]/i/1e3|0)==ue(10,t-3)-1,s}function dt(e,t,r){for(var u,n=[0],i,s=0,h=e.length;s<h;){for(i=n.length;i--;)n[i]*=t;for(n[0]+=Wt.indexOf(e.charAt(s++)),u=0;u<n.length;u++)n[u]>r-1&&(n[u+1]===void 0&&(n[u+1]=0),n[u+1]+=n[u]/r|0,n[u]%=r)}return n.reverse()}function pi(e,t){var r,u,n;if(t.isZero())return t;u=t.d.length,u<32?(r=Math.ceil(u/3),n=(1/Tt(4,r)).toString()):(r=16,n="2.3283064365386962890625e-10"),e.precision+=r,t=Qe(e,1,t.times(n),new e(1));for(var i=r;i--;){var s=t.times(t);t=s.times(s).minus(s).times(8).plus(1)}return e.precision-=r,t}var Y=function(){function e(u,n,i){var s,h=0,D=u.length;for(u=u.slice();D--;)s=u[D]*n+h,u[D]=s%i|0,h=s/i|0;return h&&u.unshift(h),u}function t(u,n,i,s){var h,D;if(i!=s)D=i>s?1:-1;else for(h=D=0;h<i;h++)if(u[h]!=n[h]){D=u[h]>n[h]?1:-1;break}return D}function r(u,n,i,s){for(var h=0;i--;)u[i]-=h,h=u[i]<n[i]?1:0,u[i]=h*s+u[i]-n[i];for(;!u[0]&&u.length>1;)u.shift()}return function(u,n,i,s,h,D){var p,a,o,f,l,g,c,d,v,F,E,w,N,B,M,C,_,z,k,q,U=u.constructor,K=u.s==n.s?1:-1,W=u.d,H=n.d;if(!W||!W[0]||!H||!H[0])return new U(!u.s||!n.s||(W?H&&W[0]==H[0]:!H)?NaN:W&&W[0]==0||!H?K*0:K/0);for(D?(l=1,a=u.e-n.e):(D=Ie,l=j,a=pe(u.e/l)-pe(n.e/l)),k=H.length,_=W.length,v=new U(K),F=v.d=[],o=0;H[o]==(W[o]||0);o++);if(H[o]>(W[o]||0)&&a--,i==null?(B=i=U.precision,s=U.rounding):h?B=i+(u.e-n.e)+1:B=i,B<0)F.push(1),g=!0;else{if(B=B/l+2|0,o=0,k==1){for(f=0,H=H[0],B++;(o<_||f)&&B--;o++)M=f*D+(W[o]||0),F[o]=M/H|0,f=M%H|0;g=f||o<_}else{for(f=D/(H[0]+1)|0,f>1&&(H=e(H,f,D),W=e(W,f,D),k=H.length,_=W.length),C=k,E=W.slice(0,k),w=E.length;w<k;)E[w++]=0;q=H.slice(),q.unshift(0),z=H[0],H[1]>=D/2&&++z;do f=0,p=t(H,E,k,w),p<0?(N=E[0],k!=w&&(N=N*D+(E[1]||0)),f=N/z|0,f>1?(f>=D&&(f=D-1),c=e(H,f,D),d=c.length,w=E.length,p=t(c,E,d,w),p==1&&(f--,r(c,k<d?q:H,d,D))):(f==0&&(p=f=1),c=H.slice()),d=c.length,d<w&&c.unshift(0),r(E,c,w,D),p==-1&&(w=E.length,p=t(H,E,k,w),p<1&&(f++,r(E,k<w?q:H,w,D))),w=E.length):p===0&&(f++,E=[0]),F[o++]=f,p&&E[0]?E[w++]=W[C]||0:(E=[W[C]],w=1);while((C++<_||E[0]!==void 0)&&B--);g=E[0]!==void 0}F[0]||F.shift()}if(l==1)v.e=a,Gr=g;else{for(o=1,f=F[0];f>=10;f/=10)o++;v.e=o+a*l-1,L(v,h?i+v.e+1:i,s,g)}return v}}();function L(e,t,r,u){var n,i,s,h,D,p,a,o,f,l=e.constructor;e:if(t!=null){if(o=e.d,!o)return e;for(n=1,h=o[0];h>=10;h/=10)n++;if(i=t-n,i<0)i+=j,s=t,a=o[f=0],D=a/ue(10,n-s-1)%10|0;else if(f=Math.ceil((i+1)/j),h=o.length,f>=h)if(u){for(;h++<=f;)o.push(0);a=D=0,n=1,i%=j,s=i-j+1}else break e;else{for(a=h=o[f],n=1;h>=10;h/=10)n++;i%=j,s=i-j+n,D=s<0?0:a/ue(10,n-s-1)%10|0}if(u=u||t<0||o[f+1]!==void 0||(s<0?a:a%ue(10,n-s-1)),p=r<4?(D||u)&&(r==0||r==(e.s<0?3:2)):D>5||D==5&&(r==4||u||r==6&&(i>0?s>0?a/ue(10,n-s):0:o[f-1])%10&1||r==(e.s<0?8:7)),t<1||!o[0])return o.length=0,p?(t-=e.e+1,o[0]=ue(10,(j-t%j)%j),e.e=-t||0):o[0]=e.e=0,e;if(i==0?(o.length=f,h=1,f--):(o.length=f+1,h=ue(10,j-i),o[f]=s>0?(a/ue(10,n-s)%ue(10,s)|0)*h:0),p)for(;;)if(f==0){for(i=1,s=o[0];s>=10;s/=10)i++;for(s=o[0]+=h,h=1;s>=10;s/=10)h++;i!=h&&(e.e++,o[0]==Ie&&(o[0]=1));break}else{if(o[f]+=h,o[f]!=Ie)break;o[f--]=0,h=1}for(i=o.length;o[--i]===0;)o.pop()}return Z&&(e.e>l.maxE?(e.d=null,e.e=NaN):e.e<l.minE&&(e.e=0,e.d=[0])),e}function Te(e,t,r){if(!e.isFinite())return un(e);var u,n=e.e,i=he(e.d),s=i.length;return t?(r&&(u=r-s)>0?i=i.charAt(0)+"."+i.slice(1)+Re(u):s>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(e.e<0?"e":"e+")+e.e):n<0?(i="0."+Re(-n-1)+i,r&&(u=r-s)>0&&(i+=Re(u))):n>=s?(i+=Re(n+1-s),r&&(u=r-n-1)>0&&(i=i+"."+Re(u))):((u=n+1)<s&&(i=i.slice(0,u)+"."+i.slice(u)),r&&(u=r-s)>0&&(n+1===s&&(i+="."),i+=Re(u))),i}function Ot(e,t){var r=e[0];for(t*=j;r>=10;r/=10)t++;return t}function Nt(e,t,r){if(t>Di)throw Z=!0,r&&(e.precision=r),Error(Jr);return L(new e(yt),t,1,!0)}function Se(e,t,r){if(t>Gt)throw Error(Jr);return L(new e(Bt),t,r,!0)}function tn(e){var t=e.length-1,r=t*j+1;if(t=e[t],t){for(;t%10==0;t/=10)r--;for(t=e[0];t>=10;t/=10)r++}return r}function Re(e){for(var t="";e--;)t+="0";return t}function rn(e,t,r,u){var n,i=new e(1),s=Math.ceil(u/j+4);for(Z=!1;;){if(r%2&&(i=i.times(t),Nr(i.d,s)&&(n=!0)),r=pe(r/2),r===0){r=i.d.length-1,n&&i.d[r]===0&&++i.d[r];break}t=t.times(t),Nr(t.d,s)}return Z=!0,i}function Br(e){return e.d[e.d.length-1]&1}function nn(e,t,r){for(var u,n=new e(t[0]),i=0;++i<t.length;)if(u=new e(t[i]),u.s)n[r](u)&&(n=u);else{n=u;break}return n}function Jt(e,t){var r,u,n,i,s,h,D,p=0,a=0,o=0,f=e.constructor,l=f.rounding,g=f.precision;if(!e.d||!e.d[0]||e.e>17)return new f(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:0/0);for(t==null?(Z=!1,D=g):D=t,h=new f(.03125);e.e>-2;)e=e.times(h),o+=5;for(u=Math.log(ue(2,o))/Math.LN10*2+5|0,D+=u,r=i=s=new f(1),f.precision=D;;){if(i=L(i.times(e),D,1),r=r.times(++a),h=s.plus(Y(i,r,D,1)),he(h.d).slice(0,D)===he(s.d).slice(0,D)){for(n=o;n--;)s=L(s.times(s),D,1);if(t==null)if(p<3&&at(s.d,D-u,l,p))f.precision=D+=10,r=i=h=new f(1),a=0,p++;else return L(s,f.precision=g,l,Z=!0);else return f.precision=g,s}s=h}}function ze(e,t){var r,u,n,i,s,h,D,p,a,o,f,l=1,g=10,c=e,d=c.d,v=c.constructor,F=v.rounding,E=v.precision;if(c.s<0||!d||!d[0]||!c.e&&d[0]==1&&d.length==1)return new v(d&&!d[0]?-1/0:c.s!=1?NaN:d?0:c);if(t==null?(Z=!1,a=E):a=t,v.precision=a+=g,r=he(d),u=r.charAt(0),Math.abs(i=c.e)<15e14){for(;u<7&&u!=1||u==1&&r.charAt(1)>3;)c=c.times(e),r=he(c.d),u=r.charAt(0),l++;i=c.e,u>1?(c=new v("0."+r),i++):c=new v(u+"."+r.slice(1))}else return p=Nt(v,a+2,E).times(i+""),c=ze(new v(u+"."+r.slice(1)),a-g).plus(p),v.precision=E,t==null?L(c,E,F,Z=!0):c;for(o=c,D=s=c=Y(c.minus(1),c.plus(1),a,1),f=L(c.times(c),a,1),n=3;;){if(s=L(s.times(f),a,1),p=D.plus(Y(s,new v(n),a,1)),he(p.d).slice(0,a)===he(D.d).slice(0,a))if(D=D.times(2),i!==0&&(D=D.plus(Nt(v,a+2,E).times(i+""))),D=Y(D,new v(l),a,1),t==null)if(at(D.d,a-g,F,h))v.precision=a+=g,p=s=c=Y(o.minus(1),o.plus(1),a,1),f=L(c.times(c),a,1),n=h=1;else return L(D,v.precision=E,F,Z=!0);else return v.precision=E,D;D=p,n+=2}}function un(e){return String(e.s*e.s/0)}function Xt(e,t){var r,u,n;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(u=t.search(/e/i))>0?(r<0&&(r=u),r+=+t.slice(u+1),t=t.substring(0,u)):r<0&&(r=t.length),u=0;t.charCodeAt(u)===48;u++);for(n=t.length;t.charCodeAt(n-1)===48;--n);if(t=t.slice(u,n),t){if(n-=u,e.e=r=r-u-1,e.d=[],u=(r+1)%j,r<0&&(u+=j),u<n){for(u&&e.d.push(+t.slice(0,u)),n-=j;u<n;)e.d.push(+t.slice(u,u+=j));t=t.slice(u),u=j-t.length}else u-=n;for(;u--;)t+="0";e.d.push(+t),Z&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function vi(e,t){var r,u,n,i,s,h,D,p,a;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),en.test(t))return Xt(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(ci.test(t))r=16,t=t.toLowerCase();else if(fi.test(t))r=2;else if(hi.test(t))r=8;else throw Error(Le+t);for(i=t.search(/p/i),i>0?(D=+t.slice(i+1),t=t.substring(2,i)):t=t.slice(2),i=t.indexOf("."),s=i>=0,u=e.constructor,s&&(t=t.replace(".",""),h=t.length,i=h-i,n=rn(u,new u(r),i,i*2)),p=dt(t,r,Ie),a=p.length-1,i=a;p[i]===0;--i)p.pop();return i<0?new u(e.s*0):(e.e=Ot(p,a),e.d=p,Z=!1,s&&(e=Y(e,n,h*4)),D&&(e=e.times(Math.abs(D)<54?ue(2,D):et.pow(2,D))),Z=!0,e)}function di(e,t){var r,u=t.d.length;if(u<3)return t.isZero()?t:Qe(e,2,t,t);r=1.4*Math.sqrt(u),r=r>16?16:r|0,t=t.times(1/Tt(5,r)),t=Qe(e,2,t,t);for(var n,i=new e(5),s=new e(16),h=new e(20);r--;)n=t.times(t),t=t.times(i.plus(n.times(s.times(n).minus(h))));return t}function Qe(e,t,r,u,n){var i,s,h,D,p=e.precision,a=Math.ceil(p/j);for(Z=!1,D=r.times(r),h=new e(u);;){if(s=Y(h.times(D),new e(t++*t++),p,1),h=n?u.plus(s):u.minus(s),u=Y(s.times(D),new e(t++*t++),p,1),s=h.plus(u),s.d[a]!==void 0){for(i=a;s.d[i]===h.d[i]&&i--;);if(i==-1)break}i=h,h=u,u=s,s=i}return Z=!0,s.d.length=a+1,s}function Tt(e,t){for(var r=e;--t;)r*=e;return r}function on(e,t){var r,u=t.s<0,n=Se(e,e.precision,1),i=n.times(.5);if(t=t.abs(),t.lte(i))return ke=u?4:1,t;if(r=t.divToInt(n),r.isZero())ke=u?3:2;else{if(t=t.minus(r.times(n)),t.lte(i))return ke=Br(r)?u?2:3:u?4:1,t;ke=Br(r)?u?1:4:u?3:2}return t.minus(n).abs()}function rr(e,t,r,u){var n,i,s,h,D,p,a,o,f,l=e.constructor,g=r!==void 0;if(g?(we(r,1,Ue),u===void 0?u=l.rounding:we(u,0,8)):(r=l.precision,u=l.rounding),!e.isFinite())a=un(e);else{for(a=Te(e),s=a.indexOf("."),g?(n=2,t==16?r=r*4-3:t==8&&(r=r*3-2)):n=t,s>=0&&(a=a.replace(".",""),f=new l(1),f.e=a.length-s,f.d=dt(Te(f),10,n),f.e=f.d.length),o=dt(a,10,n),i=D=o.length;o[--D]==0;)o.pop();if(!o[0])a=g?"0p+0":"0";else{if(s<0?i--:(e=new l(e),e.d=o,e.e=i,e=Y(e,f,r,u,0,n),o=e.d,i=e.e,p=Gr),s=o[r],h=n/2,p=p||o[r+1]!==void 0,p=u<4?(s!==void 0||p)&&(u===0||u===(e.s<0?3:2)):s>h||s===h&&(u===4||p||u===6&&o[r-1]&1||u===(e.s<0?8:7)),o.length=r,p)for(;++o[--r]>n-1;)o[r]=0,r||(++i,o.unshift(1));for(D=o.length;!o[D-1];--D);for(s=0,a="";s<D;s++)a+=Wt.charAt(o[s]);if(g){if(D>1)if(t==16||t==8){for(s=t==16?4:3,--D;D%s;D++)a+="0";for(o=dt(a,n,t),D=o.length;!o[D-1];--D);for(s=1,a="1.";s<D;s++)a+=Wt.charAt(o[s])}else a=a.charAt(0)+"."+a.slice(1);a=a+(i<0?"p":"p+")+i}else if(i<0){for(;++i;)a="0"+a;a="0."+a}else if(++i>D)for(i-=D;i--;)a+="0";else i<D&&(a=a.slice(0,i)+"."+a.slice(i))}a=(t==16?"0x":t==2?"0b":t==8?"0o":"")+a}return e.s<0?"-"+a:a}function Nr(e,t){if(e.length>t)return e.length=t,!0}function gi(e){return new this(e).abs()}function mi(e){return new this(e).acos()}function Ei(e){return new this(e).acosh()}function Fi(e,t){return new this(e).plus(t)}function Ai(e){return new this(e).asin()}function wi(e){return new this(e).asinh()}function Ci(e){return new this(e).atan()}function yi(e){return new this(e).atanh()}function Bi(e,t){e=new this(e),t=new this(t);var r,u=this.precision,n=this.rounding,i=u+4;return!e.s||!t.s?r=new this(NaN):!e.d&&!t.d?(r=Se(this,i,1).times(t.s>0?.25:.75),r.s=e.s):!t.d||e.isZero()?(r=t.s<0?Se(this,u,n):new this(0),r.s=e.s):!e.d||t.isZero()?(r=Se(this,i,1).times(.5),r.s=e.s):t.s<0?(this.precision=i,this.rounding=1,r=this.atan(Y(e,t,i,1)),t=Se(this,i,1),this.precision=u,this.rounding=n,r=e.s<0?r.minus(t):r.plus(t)):r=this.atan(Y(e,t,i,1)),r}function Ni(e){return new this(e).cbrt()}function _i(e){return L(e=new this(e),e.e+1,2)}function Mi(e,t,r){return new this(e).clamp(t,r)}function bi(e){if(!e||typeof e!="object")throw Error(It+"Object expected");var t,r,u,n=e.defaults===!0,i=["precision",1,Ue,"rounding",0,8,"toExpNeg",-Je,0,"toExpPos",0,Je,"maxE",0,Je,"minE",-Je,0,"modulo",0,9];for(t=0;t<i.length;t+=3)if(r=i[t],n&&(this[r]=Yt[r]),(u=e[r])!==void 0)if(pe(u)===u&&u>=i[t+1]&&u<=i[t+2])this[r]=u;else throw Error(Le+r+": "+u);if(r="crypto",n&&(this[r]=Yt[r]),(u=e[r])!==void 0)if(u===!0||u===!1||u===0||u===1)if(u)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(Xr);else this[r]=!1;else throw Error(Le+r+": "+u);return this}function Si(e){return new this(e).cos()}function Ii(e){return new this(e).cosh()}function sn(e){var t,r,u;function n(i){var s,h,D,p=this;if(!(p instanceof n))return new n(i);if(p.constructor=n,_r(i)){p.s=i.s,Z?!i.d||i.e>n.maxE?(p.e=NaN,p.d=null):i.e<n.minE?(p.e=0,p.d=[0]):(p.e=i.e,p.d=i.d.slice()):(p.e=i.e,p.d=i.d?i.d.slice():i.d);return}if(D=typeof i,D==="number"){if(i===0){p.s=1/i<0?-1:1,p.e=0,p.d=[0];return}if(i<0?(i=-i,p.s=-1):p.s=1,i===~~i&&i<1e7){for(s=0,h=i;h>=10;h/=10)s++;Z?s>n.maxE?(p.e=NaN,p.d=null):s<n.minE?(p.e=0,p.d=[0]):(p.e=s,p.d=[i]):(p.e=s,p.d=[i]);return}else if(i*0!==0){i||(p.s=NaN),p.e=NaN,p.d=null;return}return Xt(p,i.toString())}else if(D!=="string")throw Error(Le+i);return(h=i.charCodeAt(0))===45?(i=i.slice(1),p.s=-1):(h===43&&(i=i.slice(1)),p.s=1),en.test(i)?Xt(p,i):vi(p,i)}if(n.prototype=S,n.ROUND_UP=0,n.ROUND_DOWN=1,n.ROUND_CEIL=2,n.ROUND_FLOOR=3,n.ROUND_HALF_UP=4,n.ROUND_HALF_DOWN=5,n.ROUND_HALF_EVEN=6,n.ROUND_HALF_CEIL=7,n.ROUND_HALF_FLOOR=8,n.EUCLID=9,n.config=n.set=bi,n.clone=sn,n.isDecimal=_r,n.abs=gi,n.acos=mi,n.acosh=Ei,n.add=Fi,n.asin=Ai,n.asinh=wi,n.atan=Ci,n.atanh=yi,n.atan2=Bi,n.cbrt=Ni,n.ceil=_i,n.clamp=Mi,n.cos=Si,n.cosh=Ii,n.div=Oi,n.exp=Ti,n.floor=Pi,n.hypot=xi,n.ln=ki,n.log=Ri,n.log10=qi,n.log2=zi,n.max=Li,n.min=Ui,n.mod=$i,n.mul=ji,n.pow=Hi,n.random=Zi,n.round=Vi,n.sign=Ki,n.sin=Wi,n.sinh=Yi,n.sqrt=Gi,n.sub=Ji,n.sum=Xi,n.tan=Qi,n.tanh=eo,n.trunc=to,e===void 0&&(e={}),e&&e.defaults!==!0)for(u=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<u.length;)e.hasOwnProperty(r=u[t++])||(e[r]=this[r]);return n.config(e),n}function Oi(e,t){return new this(e).div(t)}function Ti(e){return new this(e).exp()}function Pi(e){return L(e=new this(e),e.e+1,3)}function xi(){var e,t,r=new this(0);for(Z=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)r.d&&(r=r.plus(t.times(t)));else{if(t.s)return Z=!0,new this(1/0);r=t}return Z=!0,r.sqrt()}function _r(e){return e instanceof et||e&&e.toStringTag===Qr||!1}function ki(e){return new this(e).ln()}function Ri(e,t){return new this(e).log(t)}function zi(e){return new this(e).log(2)}function qi(e){return new this(e).log(10)}function Li(){return nn(this,arguments,"lt")}function Ui(){return nn(this,arguments,"gt")}function $i(e,t){return new this(e).mod(t)}function ji(e,t){return new this(e).mul(t)}function Hi(e,t){return new this(e).pow(t)}function Zi(e){var t,r,u,n,i=0,s=new this(1),h=[];if(e===void 0?e=this.precision:we(e,1,Ue),u=Math.ceil(e/j),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(u));i<u;)n=t[i],n>=429e7?t[i]=crypto.getRandomValues(new Uint32Array(1))[0]:h[i++]=n%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(u*=4);i<u;)n=t[i]+(t[i+1]<<8)+(t[i+2]<<16)+((t[i+3]&127)<<24),n>=214e7?crypto.randomBytes(4).copy(t,i):(h.push(n%1e7),i+=4);i=u/4}else throw Error(Xr);else for(;i<u;)h[i++]=Math.random()*1e7|0;for(u=h[--i],e%=j,u&&e&&(n=ue(10,j-e),h[i]=(u/n|0)*n);h[i]===0;i--)h.pop();if(i<0)r=0,h=[0];else{for(r=-1;h[0]===0;r-=j)h.shift();for(u=1,n=h[0];n>=10;n/=10)u++;u<j&&(r-=j-u)}return s.e=r,s.d=h,s}function Vi(e){return L(e=new this(e),e.e+1,this.rounding)}function Ki(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function Wi(e){return new this(e).sin()}function Yi(e){return new this(e).sinh()}function Gi(e){return new this(e).sqrt()}function Ji(e,t){return new this(e).sub(t)}function Xi(){var e=0,t=arguments,r=new this(t[e]);for(Z=!1;r.s&&++e<t.length;)r=r.plus(t[e]);return Z=!0,L(r,this.precision,this.rounding)}function Qi(e){return new this(e).tan()}function eo(e){return new this(e).tanh()}function to(e){return L(e=new this(e),e.e+1,1)}S[Symbol.for("nodejs.util.inspect.custom")]=S.toString;S[Symbol.toStringTag]="Decimal";var et=S.constructor=sn(Yt);yt=new et(yt);Bt=new et(Bt);var ro="BigNumber",no=["?on","config"],uo=Ce(ro,no,e=>{var{on:t,config:r}=e,u=et.clone({precision:r.precision,modulo:et.EUCLID});return u.prototype=Object.create(u.prototype),u.prototype.type="BigNumber",u.prototype.isBigNumber=!0,u.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},u.fromJSON=function(n){return new u(n.value)},t&&t("config",function(n,i){n.precision!==i.precision&&u.config({precision:n.precision})}),u},{isClass:!0}),an={exports:{}};/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(e,t){(function(r){var u=Math.cosh||function(o){return Math.abs(o)<1e-9?1-o:(Math.exp(o)+Math.exp(-o))*.5},n=Math.sinh||function(o){return Math.abs(o)<1e-9?o:(Math.exp(o)-Math.exp(-o))*.5},i=function(o){var f=Math.PI/4;if(-f>o||o>f)return Math.cos(o)-1;var l=o*o;return l*(l*(l*(l*(l*(l*(l*(l/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},s=function(o,f){var l=Math.abs(o),g=Math.abs(f);return l<3e3&&g<3e3?Math.sqrt(l*l+g*g):(l<g?(l=g,g=o/f):g=f/o,l*Math.sqrt(1+g*g))},h=function(){throw SyntaxError("Invalid Param")};function D(o,f){var l=Math.abs(o),g=Math.abs(f);return o===0?Math.log(g):f===0?Math.log(l):l<3e3&&g<3e3?Math.log(o*o+f*f)*.5:(o=o/2,f=f/2,.5*Math.log(o*o+f*f)+Math.LN2)}var p=function(o,f){var l={re:0,im:0};if(o==null)l.re=l.im=0;else if(f!==void 0)l.re=o,l.im=f;else switch(typeof o){case"object":if("im"in o&&"re"in o)l.re=o.re,l.im=o.im;else if("abs"in o&&"arg"in o){if(!Number.isFinite(o.abs)&&Number.isFinite(o.arg))return a.INFINITY;l.re=o.abs*Math.cos(o.arg),l.im=o.abs*Math.sin(o.arg)}else if("r"in o&&"phi"in o){if(!Number.isFinite(o.r)&&Number.isFinite(o.phi))return a.INFINITY;l.re=o.r*Math.cos(o.phi),l.im=o.r*Math.sin(o.phi)}else o.length===2?(l.re=o[0],l.im=o[1]):h();break;case"string":l.im=l.re=0;var g=o.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),c=1,d=0;g===null&&h();for(var v=0;v<g.length;v++){var F=g[v];F===" "||F==="	"||F===`
`||(F==="+"?c++:F==="-"?d++:F==="i"||F==="I"?(c+d===0&&h(),g[v+1]!==" "&&!isNaN(g[v+1])?(l.im+=parseFloat((d%2?"-":"")+g[v+1]),v++):l.im+=parseFloat((d%2?"-":"")+"1"),c=d=0):((c+d===0||isNaN(F))&&h(),g[v+1]==="i"||g[v+1]==="I"?(l.im+=parseFloat((d%2?"-":"")+F),v++):l.re+=parseFloat((d%2?"-":"")+F),c=d=0))}c+d>0&&h();break;case"number":l.im=0,l.re=o;break;default:h()}return isNaN(l.re)||isNaN(l.im),l};function a(o,f){if(!(this instanceof a))return new a(o,f);var l=p(o,f);this.re=l.re,this.im=l.im}a.prototype={re:0,im:0,sign:function(){var o=this.abs();return new a(this.re/o,this.im/o)},add:function(o,f){var l=new a(o,f);return this.isInfinite()&&l.isInfinite()?a.NAN:this.isInfinite()||l.isInfinite()?a.INFINITY:new a(this.re+l.re,this.im+l.im)},sub:function(o,f){var l=new a(o,f);return this.isInfinite()&&l.isInfinite()?a.NAN:this.isInfinite()||l.isInfinite()?a.INFINITY:new a(this.re-l.re,this.im-l.im)},mul:function(o,f){var l=new a(o,f);return this.isInfinite()&&l.isZero()||this.isZero()&&l.isInfinite()?a.NAN:this.isInfinite()||l.isInfinite()?a.INFINITY:l.im===0&&this.im===0?new a(this.re*l.re,0):new a(this.re*l.re-this.im*l.im,this.re*l.im+this.im*l.re)},div:function(o,f){var l=new a(o,f);if(this.isZero()&&l.isZero()||this.isInfinite()&&l.isInfinite())return a.NAN;if(this.isInfinite()||l.isZero())return a.INFINITY;if(this.isZero()||l.isInfinite())return a.ZERO;o=this.re,f=this.im;var g=l.re,c=l.im,d,v;return c===0?new a(o/g,f/g):Math.abs(g)<Math.abs(c)?(v=g/c,d=g*v+c,new a((o*v+f)/d,(f*v-o)/d)):(v=c/g,d=c*v+g,new a((o+f*v)/d,(f-o*v)/d))},pow:function(o,f){var l=new a(o,f);if(o=this.re,f=this.im,l.isZero())return a.ONE;if(l.im===0){if(f===0&&o>0)return new a(Math.pow(o,l.re),0);if(o===0)switch((l.re%4+4)%4){case 0:return new a(Math.pow(f,l.re),0);case 1:return new a(0,Math.pow(f,l.re));case 2:return new a(-Math.pow(f,l.re),0);case 3:return new a(0,-Math.pow(f,l.re))}}if(o===0&&f===0&&l.re>0&&l.im>=0)return a.ZERO;var g=Math.atan2(f,o),c=D(o,f);return o=Math.exp(l.re*c-l.im*g),f=l.im*c+l.re*g,new a(o*Math.cos(f),o*Math.sin(f))},sqrt:function(){var o=this.re,f=this.im,l=this.abs(),g,c;if(o>=0){if(f===0)return new a(Math.sqrt(o),0);g=.5*Math.sqrt(2*(l+o))}else g=Math.abs(f)/Math.sqrt(2*(l-o));return o<=0?c=.5*Math.sqrt(2*(l-o)):c=Math.abs(f)/Math.sqrt(2*(l+o)),new a(g,f<0?-c:c)},exp:function(){var o=Math.exp(this.re);return this.im,new a(o*Math.cos(this.im),o*Math.sin(this.im))},expm1:function(){var o=this.re,f=this.im;return new a(Math.expm1(o)*Math.cos(f)+i(f),Math.exp(o)*Math.sin(f))},log:function(){var o=this.re,f=this.im;return new a(D(o,f),Math.atan2(f,o))},abs:function(){return s(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var o=this.re,f=this.im;return new a(Math.sin(o)*u(f),Math.cos(o)*n(f))},cos:function(){var o=this.re,f=this.im;return new a(Math.cos(o)*u(f),-Math.sin(o)*n(f))},tan:function(){var o=2*this.re,f=2*this.im,l=Math.cos(o)+u(f);return new a(Math.sin(o)/l,n(f)/l)},cot:function(){var o=2*this.re,f=2*this.im,l=Math.cos(o)-u(f);return new a(-Math.sin(o)/l,n(f)/l)},sec:function(){var o=this.re,f=this.im,l=.5*u(2*f)+.5*Math.cos(2*o);return new a(Math.cos(o)*u(f)/l,Math.sin(o)*n(f)/l)},csc:function(){var o=this.re,f=this.im,l=.5*u(2*f)-.5*Math.cos(2*o);return new a(Math.sin(o)*u(f)/l,-Math.cos(o)*n(f)/l)},asin:function(){var o=this.re,f=this.im,l=new a(f*f-o*o+1,-2*o*f).sqrt(),g=new a(l.re-f,l.im+o).log();return new a(g.im,-g.re)},acos:function(){var o=this.re,f=this.im,l=new a(f*f-o*o+1,-2*o*f).sqrt(),g=new a(l.re-f,l.im+o).log();return new a(Math.PI/2-g.im,g.re)},atan:function(){var o=this.re,f=this.im;if(o===0){if(f===1)return new a(0,1/0);if(f===-1)return new a(0,-1/0)}var l=o*o+(1-f)*(1-f),g=new a((1-f*f-o*o)/l,-2*o/l).log();return new a(-.5*g.im,.5*g.re)},acot:function(){var o=this.re,f=this.im;if(f===0)return new a(Math.atan2(1,o),0);var l=o*o+f*f;return l!==0?new a(o/l,-f/l).atan():new a(o!==0?o/0:0,f!==0?-f/0:0).atan()},asec:function(){var o=this.re,f=this.im;if(o===0&&f===0)return new a(0,1/0);var l=o*o+f*f;return l!==0?new a(o/l,-f/l).acos():new a(o!==0?o/0:0,f!==0?-f/0:0).acos()},acsc:function(){var o=this.re,f=this.im;if(o===0&&f===0)return new a(Math.PI/2,1/0);var l=o*o+f*f;return l!==0?new a(o/l,-f/l).asin():new a(o!==0?o/0:0,f!==0?-f/0:0).asin()},sinh:function(){var o=this.re,f=this.im;return new a(n(o)*Math.cos(f),u(o)*Math.sin(f))},cosh:function(){var o=this.re,f=this.im;return new a(u(o)*Math.cos(f),n(o)*Math.sin(f))},tanh:function(){var o=2*this.re,f=2*this.im,l=u(o)+Math.cos(f);return new a(n(o)/l,Math.sin(f)/l)},coth:function(){var o=2*this.re,f=2*this.im,l=u(o)-Math.cos(f);return new a(n(o)/l,-Math.sin(f)/l)},csch:function(){var o=this.re,f=this.im,l=Math.cos(2*f)-u(2*o);return new a(-2*n(o)*Math.cos(f)/l,2*u(o)*Math.sin(f)/l)},sech:function(){var o=this.re,f=this.im,l=Math.cos(2*f)+u(2*o);return new a(2*u(o)*Math.cos(f)/l,-2*n(o)*Math.sin(f)/l)},asinh:function(){var o=this.im;this.im=-this.re,this.re=o;var f=this.asin();return this.re=-this.im,this.im=o,o=f.re,f.re=-f.im,f.im=o,f},acosh:function(){var o=this.acos();if(o.im<=0){var f=o.re;o.re=-o.im,o.im=f}else{var f=o.im;o.im=-o.re,o.re=f}return o},atanh:function(){var o=this.re,f=this.im,l=o>1&&f===0,g=1-o,c=1+o,d=g*g+f*f,v=d!==0?new a((c*g-f*f)/d,(f*g+c*f)/d):new a(o!==-1?o/0:0,f!==0?f/0:0),F=v.re;return v.re=D(v.re,v.im)/2,v.im=Math.atan2(v.im,F)/2,l&&(v.im=-v.im),v},acoth:function(){var o=this.re,f=this.im;if(o===0&&f===0)return new a(0,Math.PI/2);var l=o*o+f*f;return l!==0?new a(o/l,-f/l).atanh():new a(o!==0?o/0:0,f!==0?-f/0:0).atanh()},acsch:function(){var o=this.re,f=this.im;if(f===0)return new a(o!==0?Math.log(o+Math.sqrt(o*o+1)):1/0,0);var l=o*o+f*f;return l!==0?new a(o/l,-f/l).asinh():new a(o!==0?o/0:0,f!==0?-f/0:0).asinh()},asech:function(){var o=this.re,f=this.im;if(this.isZero())return a.INFINITY;var l=o*o+f*f;return l!==0?new a(o/l,-f/l).acosh():new a(o!==0?o/0:0,f!==0?-f/0:0).acosh()},inverse:function(){if(this.isZero())return a.INFINITY;if(this.isInfinite())return a.ZERO;var o=this.re,f=this.im,l=o*o+f*f;return new a(o/l,-f/l)},conjugate:function(){return new a(this.re,-this.im)},neg:function(){return new a(-this.re,-this.im)},ceil:function(o){return o=Math.pow(10,o||0),new a(Math.ceil(this.re*o)/o,Math.ceil(this.im*o)/o)},floor:function(o){return o=Math.pow(10,o||0),new a(Math.floor(this.re*o)/o,Math.floor(this.im*o)/o)},round:function(o){return o=Math.pow(10,o||0),new a(Math.round(this.re*o)/o,Math.round(this.im*o)/o)},equals:function(o,f){var l=new a(o,f);return Math.abs(l.re-this.re)<=a.EPSILON&&Math.abs(l.im-this.im)<=a.EPSILON},clone:function(){return new a(this.re,this.im)},toString:function(){var o=this.re,f=this.im,l="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(o)<a.EPSILON&&(o=0),Math.abs(f)<a.EPSILON&&(f=0),f===0?l+o:(o!==0?(l+=o,l+=" ",f<0?(f=-f,l+="-"):l+="+",l+=" "):f<0&&(f=-f,l+="-"),f!==1&&(l+=f),l+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},a.ZERO=new a(0,0),a.ONE=new a(1,0),a.I=new a(0,1),a.PI=new a(Math.PI,0),a.E=new a(Math.E,0),a.INFINITY=new a(1/0,1/0),a.NAN=new a(NaN,NaN),a.EPSILON=1e-15,Object.defineProperty(a,"__esModule",{value:!0}),a.default=a,a.Complex=a,e.exports=a})()})(an);var io=an.exports;const ce=Qt.getDefaultExportFromCjs(io);var oo="Complex",so=[],ao=Ce(oo,so,()=>(Object.defineProperty(ce,"name",{value:"Complex"}),ce.prototype.constructor=ce,ce.prototype.type="Complex",ce.prototype.isComplex=!0,ce.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},ce.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},ce.prototype.format=function(e){var t="",r=this.im,u=this.re,n=Ht(this.re,e),i=Ht(this.im,e),s=ee(e)?e:e?e.precision:null;if(s!==null){var h=Math.pow(10,-s);Math.abs(u/r)<h&&(u=0),Math.abs(r/u)<h&&(r=0)}return r===0?t=n:u===0?r===1?t="i":r===-1?t="-i":t=i+"i":r<0?r===-1?t=n+" - i":t=n+" - "+i.substring(1)+"i":r===1?t=n+" + i":t=n+" + "+i+"i",t},ce.fromPolar=function(e){switch(arguments.length){case 1:{var t=arguments[0];if(typeof t=="object")return ce(t);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var r=arguments[0],u=arguments[1];if(ee(r)){if(qr(u)&&u.hasBase("ANGLE")&&(u=u.toNumber("rad")),ee(u))return new ce({r,phi:u});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},ce.prototype.valueOf=ce.prototype.toString,ce.fromJSON=function(e){return new ce(e)},ce.compare=function(e,t){return e.re>t.re?1:e.re<t.re?-1:e.im>t.im?1:e.im<t.im?-1:0},ce),{isClass:!0}),fn={exports:{}};/**
 * @license Fraction.js v4.2.0 05/03/2022
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2021, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(e,t){(function(r){var u=2e3,n={s:1,n:0,d:1};function i(g,c){if(isNaN(g=parseInt(g,10)))throw l.InvalidParameter;return g*c}function s(g,c){if(c===0)throw l.DivisionByZero;var d=Object.create(l.prototype);d.s=g<0?-1:1,g=g<0?-g:g;var v=f(g,c);return d.n=g/v,d.d=c/v,d}function h(g){for(var c={},d=g,v=2,F=4;F<=d;){for(;d%v===0;)d/=v,c[v]=(c[v]||0)+1;F+=1+2*v++}return d!==g?d>1&&(c[d]=(c[d]||0)+1):c[g]=(c[g]||0)+1,c}var D=function(g,c){var d=0,v=1,F=1,E=0,w=0,N=0,B=1,M=1,C=0,_=1,z=1,k=1,q=1e7,U;if(g!=null)if(c!==void 0){if(d=g,v=c,F=d*v,d%1!==0||v%1!==0)throw l.NonIntegerParameter}else switch(typeof g){case"object":{if("d"in g&&"n"in g)d=g.n,v=g.d,"s"in g&&(d*=g.s);else if(0 in g)d=g[0],1 in g&&(v=g[1]);else throw l.InvalidParameter;F=d*v;break}case"number":{if(g<0&&(F=g,g=-g),g%1===0)d=g;else if(g>0){for(g>=1&&(M=Math.pow(10,Math.floor(1+Math.log(g)/Math.LN10)),g/=M);_<=q&&k<=q;)if(U=(C+z)/(_+k),g===U){_+k<=q?(d=C+z,v=_+k):k>_?(d=z,v=k):(d=C,v=_);break}else g>U?(C+=z,_+=k):(z+=C,k+=_),_>q?(d=z,v=k):(d=C,v=_);d*=M}else(isNaN(g)||isNaN(c))&&(v=d=NaN);break}case"string":{if(_=g.match(/\d+|./g),_===null)throw l.InvalidParameter;if(_[C]==="-"?(F=-1,C++):_[C]==="+"&&C++,_.length===C+1?w=i(_[C++],F):_[C+1]==="."||_[C]==="."?(_[C]!=="."&&(E=i(_[C++],F)),C++,(C+1===_.length||_[C+1]==="("&&_[C+3]===")"||_[C+1]==="'"&&_[C+3]==="'")&&(w=i(_[C],F),B=Math.pow(10,_[C].length),C++),(_[C]==="("&&_[C+2]===")"||_[C]==="'"&&_[C+2]==="'")&&(N=i(_[C+1],F),M=Math.pow(10,_[C+1].length)-1,C+=3)):_[C+1]==="/"||_[C+1]===":"?(w=i(_[C],F),B=i(_[C+2],1),C+=3):_[C+3]==="/"&&_[C+1]===" "&&(E=i(_[C],F),w=i(_[C+2],F),B=i(_[C+4],1),C+=5),_.length<=C){v=B*M,F=d=N+v*E+M*w;break}}default:throw l.InvalidParameter}if(v===0)throw l.DivisionByZero;n.s=F<0?-1:1,n.n=Math.abs(d),n.d=Math.abs(v)};function p(g,c,d){for(var v=1;c>0;g=g*g%d,c>>=1)c&1&&(v=v*g%d);return v}function a(g,c){for(;c%2===0;c/=2);for(;c%5===0;c/=5);if(c===1)return 0;for(var d=10%c,v=1;d!==1;v++)if(d=d*10%c,v>u)return 0;return v}function o(g,c,d){for(var v=1,F=p(10,d,c),E=0;E<300;E++){if(v===F)return E;v=v*10%c,F=F*10%c}return 0}function f(g,c){if(!g)return c;if(!c)return g;for(;;){if(g%=c,!g)return c;if(c%=g,!c)return g}}function l(g,c){if(D(g,c),this instanceof l)g=f(n.d,n.n),this.s=n.s,this.n=n.n/g,this.d=n.d/g;else return s(n.s*n.n,n.d)}l.DivisionByZero=new Error("Division by Zero"),l.InvalidParameter=new Error("Invalid argument"),l.NonIntegerParameter=new Error("Parameters must be integer"),l.prototype={s:1,n:0,d:1,abs:function(){return s(this.n,this.d)},neg:function(){return s(-this.s*this.n,this.d)},add:function(g,c){return D(g,c),s(this.s*this.n*n.d+n.s*this.d*n.n,this.d*n.d)},sub:function(g,c){return D(g,c),s(this.s*this.n*n.d-n.s*this.d*n.n,this.d*n.d)},mul:function(g,c){return D(g,c),s(this.s*n.s*this.n*n.n,this.d*n.d)},div:function(g,c){return D(g,c),s(this.s*n.s*this.n*n.d,this.d*n.n)},clone:function(){return s(this.s*this.n,this.d)},mod:function(g,c){if(isNaN(this.n)||isNaN(this.d))return new l(NaN);if(g===void 0)return s(this.s*this.n%this.d,1);if(D(g,c),n.n===0&&this.d===0)throw l.DivisionByZero;return s(this.s*(n.d*this.n)%(n.n*this.d),n.d*this.d)},gcd:function(g,c){return D(g,c),s(f(n.n,this.n)*f(n.d,this.d),n.d*this.d)},lcm:function(g,c){return D(g,c),n.n===0&&this.n===0?s(0,1):s(n.n*this.n,f(n.n,this.n)*f(n.d,this.d))},ceil:function(g){return g=Math.pow(10,g||0),isNaN(this.n)||isNaN(this.d)?new l(NaN):s(Math.ceil(g*this.s*this.n/this.d),g)},floor:function(g){return g=Math.pow(10,g||0),isNaN(this.n)||isNaN(this.d)?new l(NaN):s(Math.floor(g*this.s*this.n/this.d),g)},round:function(g){return g=Math.pow(10,g||0),isNaN(this.n)||isNaN(this.d)?new l(NaN):s(Math.round(g*this.s*this.n/this.d),g)},inverse:function(){return s(this.s*this.d,this.n)},pow:function(g,c){if(D(g,c),n.d===1)return n.s<0?s(Math.pow(this.s*this.d,n.n),Math.pow(this.n,n.n)):s(Math.pow(this.s*this.n,n.n),Math.pow(this.d,n.n));if(this.s<0)return null;var d=h(this.n),v=h(this.d),F=1,E=1;for(var w in d)if(w!=="1"){if(w==="0"){F=0;break}if(d[w]*=n.n,d[w]%n.d===0)d[w]/=n.d;else return null;F*=Math.pow(w,d[w])}for(var w in v)if(w!=="1"){if(v[w]*=n.n,v[w]%n.d===0)v[w]/=n.d;else return null;E*=Math.pow(w,v[w])}return n.s<0?s(E,F):s(F,E)},equals:function(g,c){return D(g,c),this.s*this.n*n.d===n.s*n.n*this.d},compare:function(g,c){D(g,c);var d=this.s*this.n*n.d-n.s*n.n*this.d;return(0<d)-(d<0)},simplify:function(g){if(isNaN(this.n)||isNaN(this.d))return this;g=g||.001;for(var c=this.abs(),d=c.toContinued(),v=1;v<d.length;v++){for(var F=s(d[v-1],1),E=v-2;E>=0;E--)F=F.inverse().add(d[E]);if(F.sub(c).abs().valueOf()<g)return F.mul(this.s)}return this},divisible:function(g,c){return D(g,c),!(!(n.n*this.d)||this.n*n.d%(n.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(g){var c,d="",v=this.n,F=this.d;return this.s<0&&(d+="-"),F===1?d+=v:(g&&(c=Math.floor(v/F))>0&&(d+=c,d+=" ",v%=F),d+=v,d+="/",d+=F),d},toLatex:function(g){var c,d="",v=this.n,F=this.d;return this.s<0&&(d+="-"),F===1?d+=v:(g&&(c=Math.floor(v/F))>0&&(d+=c,v%=F),d+="\\frac{",d+=v,d+="}{",d+=F,d+="}"),d},toContinued:function(){var g,c=this.n,d=this.d,v=[];if(isNaN(c)||isNaN(d))return v;do v.push(Math.floor(c/d)),g=c%d,c=d,d=g;while(c!==1);return v},toString:function(g){var c=this.n,d=this.d;if(isNaN(c)||isNaN(d))return"NaN";g=g||15;var v=a(c,d),F=o(c,d,v),E=this.s<0?"-":"";if(E+=c/d|0,c%=d,c*=10,c&&(E+="."),v){for(var w=F;w--;)E+=c/d|0,c%=d,c*=10;E+="(";for(var w=v;w--;)E+=c/d|0,c%=d,c*=10;E+=")"}else for(var w=g;c&&w--;)E+=c/d|0,c%=d,c*=10;return E}},Object.defineProperty(l,"__esModule",{value:!0}),l.default=l,l.Fraction=l,e.exports=l})()})(fn);var fo=fn.exports;const xe=Qt.getDefaultExportFromCjs(fo);var co="Fraction",ho=[],lo=Ce(co,ho,()=>(Object.defineProperty(xe,"name",{value:"Fraction"}),xe.prototype.constructor=xe,xe.prototype.type="Fraction",xe.prototype.isFraction=!0,xe.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},xe.fromJSON=function(e){return new xe(e)},xe),{isClass:!0}),Do="Matrix",po=[],vo=Ce(Do,po,()=>{function e(){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator")}return e.prototype.type="Matrix",e.prototype.isMatrix=!0,e.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},e.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},e.prototype.create=function(t,r){throw new Error("Cannot invoke create on a Matrix interface")},e.prototype.subset=function(t,r,u){throw new Error("Cannot invoke subset on a Matrix interface")},e.prototype.get=function(t){throw new Error("Cannot invoke get on a Matrix interface")},e.prototype.set=function(t,r,u){throw new Error("Cannot invoke set on a Matrix interface")},e.prototype.resize=function(t,r){throw new Error("Cannot invoke resize on a Matrix interface")},e.prototype.reshape=function(t,r){throw new Error("Cannot invoke reshape on a Matrix interface")},e.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},e.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},e.prototype.map=function(t,r){throw new Error("Cannot invoke map on a Matrix interface")},e.prototype.forEach=function(t){throw new Error("Cannot invoke forEach on a Matrix interface")},e.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},e.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},e.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},e.prototype.format=function(t){throw new Error("Cannot invoke format on a Matrix interface")},e.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},e},{isClass:!0});function nr(e){return Object.keys(e.signatures||{}).reduce(function(t,r){var u=(r.match(/,/g)||[]).length+1;return Math.max(t,u)},-1)}var go="DenseMatrix",mo=["Matrix"],Eo=Ce(go,mo,e=>{var{Matrix:t}=e;function r(a,o){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(o&&!Oe(o))throw new Error("Invalid datatype: "+o);if(qe(a))a.type==="DenseMatrix"?(this._data=De(a._data),this._size=De(a._size),this._datatype=o||a._datatype):(this._data=a.toArray(),this._size=a.size(),this._datatype=o||a._datatype);else if(a&&J(a.data)&&J(a.size))this._data=a.data,this._size=a.size,yr(this._data,this._size),this._datatype=o||a.datatype;else if(J(a))this._data=p(a),this._size=wt(this._data),yr(this._data,this._size),this._datatype=o;else{if(a)throw new TypeError("Unsupported type of data ("+st(a)+")");this._data=[],this._size=[0],this._datatype=o}}r.prototype=new t,r.prototype.createDenseMatrix=function(a,o){return new r(a,o)},Object.defineProperty(r,"name",{value:"DenseMatrix"}),r.prototype.constructor=r,r.prototype.type="DenseMatrix",r.prototype.isDenseMatrix=!0,r.prototype.getDataType=function(){return Ct(this._data,st)},r.prototype.storage=function(){return"dense"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(a,o){return new r(a,o)},r.prototype.subset=function(a,o,f){switch(arguments.length){case 1:return u(this,a);case 2:case 3:return i(this,a,o,f);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(a){if(!J(a))throw new TypeError("Array expected");if(a.length!==this._size.length)throw new Q(a.length,this._size.length);for(var o=0;o<a.length;o++)X(a[o],this._size[o]);for(var f=this._data,l=0,g=a.length;l<g;l++){var c=a[l];X(c,f.length),f=f[c]}return f},r.prototype.set=function(a,o,f){if(!J(a))throw new TypeError("Array expected");if(a.length<this._size.length)throw new Q(a.length,this._size.length,"<");var l,g,c,d=a.map(function(F){return F+1});D(this,d,f);var v=this._data;for(l=0,g=a.length-1;l<g;l++)c=a[l],X(c,v.length),v=v[c];return c=a[a.length-1],X(c,v.length),v[c]=o,this};function u(a,o){if(!er(o))throw new TypeError("Invalid index");var f=o.isScalar();if(f)return a.get(o.min());var l=o.size();if(l.length!==a._size.length)throw new Q(l.length,a._size.length);for(var g=o.min(),c=o.max(),d=0,v=a._size.length;d<v;d++)X(g[d],a._size[d]),X(c[d],a._size[d]);return new r(n(a._data,o,l.length,0),a._datatype)}function n(a,o,f,l){var g=l===f-1,c=o.dimension(l);return g?c.map(function(d){return X(d,a.length),a[d]}).valueOf():c.map(function(d){X(d,a.length);var v=a[d];return n(v,o,f,l+1)}).valueOf()}function i(a,o,f,l){if(!o||o.isIndex!==!0)throw new TypeError("Invalid index");var g=o.size(),c=o.isScalar(),d;if(qe(f)?(d=f.size(),f=f.valueOf()):d=wt(f),c){if(d.length!==0)throw new TypeError("Scalar expected");a.set(o.min(),f,l)}else{if(g.length<a._size.length)throw new Q(g.length,a._size.length,"<");if(d.length<g.length){for(var v=0,F=0;g[v]===1&&d[v]===1;)v++;for(;g[v]===1;)F++,v++;f=Zr(f,g.length,F,d)}if(!Et(g,d))throw new Q(g,d,">");var E=o.max().map(function(B){return B+1});D(a,E,l);var w=g.length,N=0;s(a._data,o,f,w,N)}return a}function s(a,o,f,l,g){var c=g===l-1,d=o.dimension(g);c?d.forEach(function(v,F){X(v),a[v]=f[F[0]]}):d.forEach(function(v,F){X(v),s(a[v],o,f[F[0]],l,g+1)})}r.prototype.resize=function(a,o,f){if(!mt(a))throw new TypeError("Array or Matrix expected");var l=a.valueOf().map(c=>Array.isArray(c)&&c.length===1?c[0]:c),g=f?this.clone():this;return h(g,l,o)};function h(a,o,f){if(o.length===0){for(var l=a._data;J(l);)l=l[0];return l}return a._size=o.slice(0),a._data=Zt(a._data,a._size,f),a}r.prototype.reshape=function(a,o){var f=o?this.clone():this;f._data=Ku(f._data,a);var l=f._size.reduce((g,c)=>g*c);return f._size=tr(a,l),f};function D(a,o,f){for(var l=a._size.slice(0),g=!1;l.length<o.length;)l.push(0),g=!0;for(var c=0,d=o.length;c<d;c++)o[c]>l[c]&&(l[c]=o[c],g=!0);g&&h(a,l,f)}r.prototype.clone=function(){var a=new r({data:De(this._data),size:De(this._size),datatype:this._datatype});return a},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(a){var o=this,f=nr(a),l=function d(v,F){return J(v)?v.map(function(E,w){return d(E,F.concat(w))}):f===1?a(v):f===2?a(v,F):a(v,F,o)},g=l(this._data,[]),c=this._datatype!==void 0?Ct(g,st):void 0;return new r(g,c)},r.prototype.forEach=function(a){var o=this,f=function l(g,c){J(g)?g.forEach(function(d,v){l(d,c.concat(v))}):a(g,c,o)};f(this._data,[])},r.prototype[Symbol.iterator]=function*(){var a=function*o(f,l){if(J(f))for(var g=0;g<f.length;g++)yield*o(f[g],l.concat(g));else yield{value:f,index:l}};yield*a(this._data,[])},r.prototype.rows=function(){var a=[],o=this.size();if(o.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var f=this._data;for(var l of f)a.push(new r([l],this._datatype));return a},r.prototype.columns=function(){var a=this,o=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var l=this._data,g=function(v){var F=l.map(E=>[E[v]]);o.push(new r(F,a._datatype))},c=0;c<f[1];c++)g(c);return o},r.prototype.toArray=function(){return De(this._data)},r.prototype.valueOf=function(){return this._data},r.prototype.format=function(a){return Ae(this._data,a)},r.prototype.toString=function(){return Ae(this._data)},r.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(a){if(a){if(Me(a)&&(a=a.toNumber()),!ee(a)||!oe(a))throw new TypeError("The parameter k must be an integer number")}else a=0;for(var o=a>0?a:0,f=a<0?-a:0,l=this._size[0],g=this._size[1],c=Math.min(l-f,g-o),d=[],v=0;v<c;v++)d[v]=this._data[v+f][v+o];return new r({data:d,size:[c],datatype:this._datatype})},r.diagonal=function(a,o,f,l){if(!J(a))throw new TypeError("Array expected, size parameter");if(a.length!==2)throw new Error("Only two dimensions matrix are supported");if(a=a.map(function(M){if(Me(M)&&(M=M.toNumber()),!ee(M)||!oe(M)||M<1)throw new Error("Size values must be positive integers");return M}),f){if(Me(f)&&(f=f.toNumber()),!ee(f)||!oe(f))throw new TypeError("The parameter k must be an integer number")}else f=0;var g=f>0?f:0,c=f<0?-f:0,d=a[0],v=a[1],F=Math.min(d-c,v-g),E;if(J(o)){if(o.length!==F)throw new Error("Invalid value array length");E=function(C){return o[C]}}else if(qe(o)){var w=o.size();if(w.length!==1||w[0]!==F)throw new Error("Invalid matrix length");E=function(C){return o.get([C])}}else E=function(){return o};l||(l=Me(E(0))?E(0).mul(0):0);var N=[];if(a.length>0){N=Zt(N,a,l);for(var B=0;B<F;B++)N[B+c][B+g]=E(B)}return new r({data:N,size:[d,v]})},r.fromJSON=function(a){return new r(a)},r.prototype.swapRows=function(a,o){if(!ee(a)||!oe(a)||!ee(o)||!oe(o))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return X(a,this._size[0]),X(o,this._size[0]),r._swapRows(a,o,this._data),this},r._swapRows=function(a,o,f){var l=f[a];f[a]=f[o],f[o]=l};function p(a){for(var o=0,f=a.length;o<f;o++){var l=a[o];J(l)?a[o]=p(l):l&&l.isMatrix===!0&&(a[o]=p(l.valueOf()))}return a}return r},{isClass:!0});function Fo(e,t,r){if(r==null)return e.eq(t);if(e.eq(t))return!0;if(e.isNaN()||t.isNaN())return!1;if(e.isFinite()&&t.isFinite()){var u=e.minus(t).abs();if(u.isZero())return!0;var n=e.constructor.max(e.abs(),t.abs());return u.lte(n.times(r))}return!1}function Ao(e,t,r){return At(e.re,t.re,r)&&At(e.im,t.im,r)}var wo=Ce("compareUnits",["typed"],e=>{var{typed:t}=e;return{"Unit, Unit":t.referToSelf(r=>(u,n)=>{if(!u.equalBase(n))throw new Error("Cannot compare units with different base");return t.find(r,[u.valueType(),n.valueType()])(u.value,n.value)})}}),_t="equalScalar",Co=["typed","config"],yo=Ce(_t,Co,e=>{var{typed:t,config:r}=e,u=wo({typed:t});return t(_t,{"boolean, boolean":function(i,s){return i===s},"number, number":function(i,s){return At(i,s,r.epsilon)},"BigNumber, BigNumber":function(i,s){return i.eq(s)||Fo(i,s,r.epsilon)},"Fraction, Fraction":function(i,s){return i.equals(s)},"Complex, Complex":function(i,s){return Ao(i,s,r.epsilon)}},u)});Ce(_t,["typed","config"],e=>{var{typed:t,config:r}=e;return t(_t,{"number, number":function(n,i){return At(n,i,r.epsilon)}})});var Bo="SparseMatrix",No=["typed","equalScalar","Matrix"],_o=Ce(Bo,No,e=>{var{typed:t,equalScalar:r,Matrix:u}=e;function n(c,d){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(d&&!Oe(d))throw new Error("Invalid datatype: "+d);if(qe(c))i(this,c,d);else if(c&&J(c.index)&&J(c.ptr)&&J(c.size))this._values=c.values,this._index=c.index,this._ptr=c.ptr,this._size=c.size,this._datatype=d||c.datatype;else if(J(c))s(this,c,d);else{if(c)throw new TypeError("Unsupported type of data ("+st(c)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=d}}function i(c,d,v){d.type==="SparseMatrix"?(c._values=d._values?De(d._values):void 0,c._index=De(d._index),c._ptr=De(d._ptr),c._size=De(d._size),c._datatype=v||d._datatype):s(c,d.valueOf(),v||d._datatype)}function s(c,d,v){c._values=[],c._index=[],c._ptr=[],c._datatype=v;var F=d.length,E=0,w=r,N=0;if(Oe(v)&&(w=t.find(r,[v,v])||r,N=t.convert(0,v)),F>0){var B=0;do{c._ptr.push(c._index.length);for(var M=0;M<F;M++){var C=d[M];if(J(C)){if(B===0&&E<C.length&&(E=C.length),B<C.length){var _=C[B];w(_,N)||(c._values.push(_),c._index.push(M))}}else B===0&&E<1&&(E=1),w(C,N)||(c._values.push(C),c._index.push(M))}B++}while(B<E)}c._ptr.push(c._index.length),c._size=[F,E]}n.prototype=new u,n.prototype.createSparseMatrix=function(c,d){return new n(c,d)},Object.defineProperty(n,"name",{value:"SparseMatrix"}),n.prototype.constructor=n,n.prototype.type="SparseMatrix",n.prototype.isSparseMatrix=!0,n.prototype.getDataType=function(){return Ct(this._values,st)},n.prototype.storage=function(){return"sparse"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(c,d){return new n(c,d)},n.prototype.density=function(){var c=this._size[0],d=this._size[1];return c!==0&&d!==0?this._index.length/(c*d):0},n.prototype.subset=function(c,d,v){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return h(this,c);case 2:case 3:return D(this,c,d,v);default:throw new SyntaxError("Wrong number of arguments")}};function h(c,d){if(!er(d))throw new TypeError("Invalid index");var v=d.isScalar();if(v)return c.get(d.min());var F=d.size();if(F.length!==c._size.length)throw new Q(F.length,c._size.length);var E,w,N,B,M=d.min(),C=d.max();for(E=0,w=c._size.length;E<w;E++)X(M[E],c._size[E]),X(C[E],c._size[E]);var _=c._values,z=c._index,k=c._ptr,q=d.dimension(0),U=d.dimension(1),K=[],W=[];q.forEach(function(G,ye){W[G]=ye[0],K[G]=!0});var H=_?[]:void 0,se=[],ve=[];return U.forEach(function(G){for(ve.push(se.length),N=k[G],B=k[G+1];N<B;N++)E=z[N],K[E]===!0&&(se.push(W[E]),H&&H.push(_[N]))}),ve.push(se.length),new n({values:H,index:se,ptr:ve,size:F,datatype:c._datatype})}function D(c,d,v,F){if(!d||d.isIndex!==!0)throw new TypeError("Invalid index");var E=d.size(),w=d.isScalar(),N;if(qe(v)?(N=v.size(),v=v.toArray()):N=wt(v),w){if(N.length!==0)throw new TypeError("Scalar expected");c.set(d.min(),v,F)}else{if(E.length!==1&&E.length!==2)throw new Q(E.length,c._size.length,"<");if(N.length<E.length){for(var B=0,M=0;E[B]===1&&N[B]===1;)B++;for(;E[B]===1;)M++,B++;v=Zr(v,E.length,M,N)}if(!Et(E,N))throw new Q(E,N,">");if(E.length===1){var C=d.dimension(0);C.forEach(function(k,q){X(k),c.set([k,0],v[q[0]],F)})}else{var _=d.dimension(0),z=d.dimension(1);_.forEach(function(k,q){X(k),z.forEach(function(U,K){X(U),c.set([k,U],v[q[0]][K[0]],F)})})}}return c}n.prototype.get=function(c){if(!J(c))throw new TypeError("Array expected");if(c.length!==this._size.length)throw new Q(c.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var d=c[0],v=c[1];X(d,this._size[0]),X(v,this._size[1]);var F=p(d,this._ptr[v],this._ptr[v+1],this._index);return F<this._ptr[v+1]&&this._index[F]===d?this._values[F]:0},n.prototype.set=function(c,d,v){if(!J(c))throw new TypeError("Array expected");if(c.length!==this._size.length)throw new Q(c.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var F=c[0],E=c[1],w=this._size[0],N=this._size[1],B=r,M=0;Oe(this._datatype)&&(B=t.find(r,[this._datatype,this._datatype])||r,M=t.convert(0,this._datatype)),(F>w-1||E>N-1)&&(f(this,Math.max(F+1,w),Math.max(E+1,N),v),w=this._size[0],N=this._size[1]),X(F,w),X(E,N);var C=p(F,this._ptr[E],this._ptr[E+1],this._index);return C<this._ptr[E+1]&&this._index[C]===F?B(d,M)?a(C,E,this._values,this._index,this._ptr):this._values[C]=d:B(d,M)||o(C,F,E,d,this._values,this._index,this._ptr),this};function p(c,d,v,F){if(v-d===0)return v;for(var E=d;E<v;E++)if(F[E]===c)return E;return d}function a(c,d,v,F,E){v.splice(c,1),F.splice(c,1);for(var w=d+1;w<E.length;w++)E[w]--}function o(c,d,v,F,E,w,N){E.splice(c,0,F),w.splice(c,0,d);for(var B=v+1;B<N.length;B++)N[B]++}n.prototype.resize=function(c,d,v){if(!mt(c))throw new TypeError("Array or Matrix expected");var F=c.valueOf().map(w=>Array.isArray(w)&&w.length===1?w[0]:w);if(F.length!==2)throw new Error("Only two dimensions matrix are supported");F.forEach(function(w){if(!ee(w)||!oe(w)||w<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Ae(F)+")")});var E=v?this.clone():this;return f(E,F[0],F[1],d)};function f(c,d,v,F){var E=F||0,w=r,N=0;Oe(c._datatype)&&(w=t.find(r,[c._datatype,c._datatype])||r,N=t.convert(0,c._datatype),E=t.convert(E,c._datatype));var B=!w(E,N),M=c._size[0],C=c._size[1],_,z,k;if(v>C){for(z=C;z<v;z++)if(c._ptr[z]=c._values.length,B)for(_=0;_<M;_++)c._values.push(E),c._index.push(_);c._ptr[v]=c._values.length}else v<C&&(c._ptr.splice(v+1,C-v),c._values.splice(c._ptr[v],c._values.length),c._index.splice(c._ptr[v],c._index.length));if(C=v,d>M){if(B){var q=0;for(z=0;z<C;z++){c._ptr[z]=c._ptr[z]+q,k=c._ptr[z+1]+q;var U=0;for(_=M;_<d;_++,U++)c._values.splice(k+U,0,E),c._index.splice(k+U,0,_),q++}c._ptr[C]=c._values.length}}else if(d<M){var K=0;for(z=0;z<C;z++){c._ptr[z]=c._ptr[z]-K;var W=c._ptr[z],H=c._ptr[z+1]-K;for(k=W;k<H;k++)_=c._index[k],_>d-1&&(c._values.splice(k,1),c._index.splice(k,1),K++)}c._ptr[z]=c._values.length}return c._size[0]=d,c._size[1]=v,c}n.prototype.reshape=function(c,d){if(!J(c))throw new TypeError("Array expected");if(c.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");c.forEach(function(G){if(!ee(G)||!oe(G)||G<=-2||G===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+Ae(c)+")")});var v=this._size[0]*this._size[1];c=tr(c,v);var F=c[0]*c[1];if(v!==F)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var E=d?this.clone():this;if(this._size[0]===c[0]&&this._size[1]===c[1])return E;for(var w=[],N=0;N<E._ptr.length;N++)for(var B=0;B<E._ptr[N+1]-E._ptr[N];B++)w.push(N);for(var M=E._values.slice(),C=E._index.slice(),_=0;_<E._index.length;_++){var z=C[_],k=w[_],q=z*E._size[1]+k;w[_]=q%c[1],C[_]=Math.floor(q/c[1])}E._values.length=0,E._index.length=0,E._ptr.length=c[1]+1,E._size=c.slice();for(var U=0;U<E._ptr.length;U++)E._ptr[U]=0;for(var K=0;K<M.length;K++){var W=C[K],H=w[K],se=M[K],ve=p(W,E._ptr[H],E._ptr[H+1],E._index);o(ve,W,H,se,E._values,E._index,E._ptr)}return E},n.prototype.clone=function(){var c=new n({values:this._values?De(this._values):void 0,index:De(this._index),ptr:De(this._ptr),size:De(this._size),datatype:this._datatype});return c},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(c,d){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var v=this,F=this._size[0],E=this._size[1],w=nr(c),N=function(M,C,_){return w===1?c(M):w===2?c(M,[C,_]):c(M,[C,_],v)};return l(this,0,F-1,0,E-1,N,d)};function l(c,d,v,F,E,w,N){var B=[],M=[],C=[],_=r,z=0;Oe(c._datatype)&&(_=t.find(r,[c._datatype,c._datatype])||r,z=t.convert(0,c._datatype));for(var k=function(Ze,ft,xt){Ze=w(Ze,ft,xt),_(Ze,z)||(B.push(Ze),M.push(ft))},q=F;q<=E;q++){C.push(B.length);var U=c._ptr[q],K=c._ptr[q+1];if(N)for(var W=U;W<K;W++){var H=c._index[W];H>=d&&H<=v&&k(c._values[W],H-d,q-F)}else{for(var se={},ve=U;ve<K;ve++){var G=c._index[ve];se[G]=c._values[ve]}for(var ye=d;ye<=v;ye++){var Pt=ye in se?se[ye]:0;k(Pt,ye-d,q-F)}}}return C.push(B.length),new n({values:B,index:M,ptr:C,size:[v-d+1,E-F+1]})}n.prototype.forEach=function(c,d){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var v=this,F=this._size[0],E=this._size[1],w=0;w<E;w++){var N=this._ptr[w],B=this._ptr[w+1];if(d)for(var M=N;M<B;M++){var C=this._index[M];c(this._values[M],[C,w],v)}else{for(var _={},z=N;z<B;z++){var k=this._index[z];_[k]=this._values[z]}for(var q=0;q<F;q++){var U=q in _?_[q]:0;c(U,[q,w],v)}}}},n.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var c=this._size[1],d=0;d<c;d++)for(var v=this._ptr[d],F=this._ptr[d+1],E=v;E<F;E++){var w=this._index[E];yield{value:this._values[E],index:[w,d]}}},n.prototype.toArray=function(){return g(this._values,this._index,this._ptr,this._size,!0)},n.prototype.valueOf=function(){return g(this._values,this._index,this._ptr,this._size,!1)};function g(c,d,v,F,E){var w=F[0],N=F[1],B=[],M,C;for(M=0;M<w;M++)for(B[M]=[],C=0;C<N;C++)B[M][C]=0;for(C=0;C<N;C++)for(var _=v[C],z=v[C+1],k=_;k<z;k++)M=d[k],B[M][C]=c?E?De(c[k]):c[k]:1;return B}return n.prototype.format=function(c){for(var d=this._size[0],v=this._size[1],F=this.density(),E="Sparse Matrix ["+Ae(d,c)+" x "+Ae(v,c)+"] density: "+Ae(F,c)+`
`,w=0;w<v;w++)for(var N=this._ptr[w],B=this._ptr[w+1],M=N;M<B;M++){var C=this._index[M];E+=`
    (`+Ae(C,c)+", "+Ae(w,c)+") ==> "+(this._values?Ae(this._values[M],c):"X")}return E},n.prototype.toString=function(){return Ae(this.toArray())},n.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(c){if(c){if(Me(c)&&(c=c.toNumber()),!ee(c)||!oe(c))throw new TypeError("The parameter k must be an integer number")}else c=0;var d=c>0?c:0,v=c<0?-c:0,F=this._size[0],E=this._size[1],w=Math.min(F-v,E-d),N=[],B=[],M=[];M[0]=0;for(var C=d;C<E&&N.length<w;C++)for(var _=this._ptr[C],z=this._ptr[C+1],k=_;k<z;k++){var q=this._index[k];if(q===C-d+v){N.push(this._values[k]),B[N.length-1]=q-v;break}}return M.push(N.length),new n({values:N,index:B,ptr:M,size:[w,1]})},n.fromJSON=function(c){return new n(c)},n.diagonal=function(c,d,v,F,E){if(!J(c))throw new TypeError("Array expected, size parameter");if(c.length!==2)throw new Error("Only two dimensions matrix are supported");if(c=c.map(function(G){if(Me(G)&&(G=G.toNumber()),!ee(G)||!oe(G)||G<1)throw new Error("Size values must be positive integers");return G}),v){if(Me(v)&&(v=v.toNumber()),!ee(v)||!oe(v))throw new TypeError("The parameter k must be an integer number")}else v=0;var w=r,N=0;Oe(E)&&(w=t.find(r,[E,E])||r,N=t.convert(0,E));var B=v>0?v:0,M=v<0?-v:0,C=c[0],_=c[1],z=Math.min(C-M,_-B),k;if(J(d)){if(d.length!==z)throw new Error("Invalid value array length");k=function(ye){return d[ye]}}else if(qe(d)){var q=d.size();if(q.length!==1||q[0]!==z)throw new Error("Invalid matrix length");k=function(ye){return d.get([ye])}}else k=function(){return d};for(var U=[],K=[],W=[],H=0;H<_;H++){W.push(U.length);var se=H-B;if(se>=0&&se<z){var ve=k(se);w(ve,N)||(K.push(se+M),U.push(ve))}}return W.push(U.length),new n({values:U,index:K,ptr:W,size:[C,_]})},n.prototype.swapRows=function(c,d){if(!ee(c)||!oe(c)||!ee(d)||!oe(d))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return X(c,this._size[0]),X(d,this._size[0]),n._swapRows(c,d,this._size[1],this._values,this._index,this._ptr),this},n._forEachRow=function(c,d,v,F,E){for(var w=F[c],N=F[c+1],B=w;B<N;B++)E(v[B],d[B])},n._swapRows=function(c,d,v,F,E,w){for(var N=0;N<v;N++){var B=w[N],M=w[N+1],C=p(c,B,M,E),_=p(d,B,M,E);if(C<M&&_<M&&E[C]===c&&E[_]===d){if(F){var z=F[C];F[C]=F[_],F[_]=z}continue}if(C<M&&E[C]===c&&(_>=M||E[_]!==d)){var k=F?F[C]:void 0;E.splice(_,0,d),F&&F.splice(_,0,k),E.splice(_<=C?C+1:C,1),F&&F.splice(_<=C?C+1:C,1);continue}if(_<M&&E[_]===d&&(C>=M||E[C]!==c)){var q=F?F[_]:void 0;E.splice(C,0,c),F&&F.splice(C,0,q),E.splice(C<=_?_+1:_,1),F&&F.splice(C<=_?_+1:_,1)}}},n},{isClass:!0}),Mr="matrix",Mo=["typed","Matrix","DenseMatrix","SparseMatrix"],bo=Ce(Mr,Mo,e=>{var{typed:t,Matrix:r,DenseMatrix:u,SparseMatrix:n}=e;return t(Mr,{"":function(){return i([])},string:function(h){return i([],h)},"string, string":function(h,D){return i([],h,D)},Array:function(h){return i(h)},Matrix:function(h){return i(h,h.storage())},"Array | Matrix, string":i,"Array | Matrix, string, string":i});function i(s,h,D){if(h==="dense"||h==="default"||h===void 0)return new u(s,D);if(h==="sparse")return new n(s,D);throw new TypeError("Unknown matrix type "+JSON.stringify(h)+".")}}),br="flatten",So=["typed","matrix"],Io=Ce(br,So,e=>{var{typed:t,matrix:r}=e;return t(br,{Array:function(n){return Kt(n)},Matrix:function(n){var i=Kt(n.toArray());return r(i)}})}),Sr="map",Oo=["typed"],To=Ce(Sr,Oo,e=>{var{typed:t}=e;return t(Sr,{"Array, function":Po,"Matrix, function":function(u,n){return u.map(n)}})});function Po(e,t){var r=nr(t),u=function n(i,s){if(Array.isArray(i))return i.map(function(p,a){return n(p,s.concat(a))});try{return r===1?t(i):r===2?t(i,s):t(i,s,e)}catch(p){if(p instanceof TypeError&&"data"in p&&p.data.category==="wrongType"){var h="map attempted to call '".concat(p.data.fn,"(").concat(i),D=JSON.stringify(s);throw r===2?h+=","+D:r!==1&&(h+=",".concat(D,",").concat(e)),h+=")' but argument ".concat(p.data.index+1," of type "),h+="".concat(p.data.actual," does not match expected type "),h+=p.data.expected.join(" or "),new TypeError(h)}throw p}};return u(e,[])}var Ir="zeros",xo=["typed","config","matrix","BigNumber"],ko=Ce(Ir,xo,e=>{var{typed:t,config:r,matrix:u,BigNumber:n}=e;return t(Ir,{"":function(){return r.matrix==="Array"?i([]):i([],"default")},"...number | BigNumber | string":function(p){var a=p[p.length-1];if(typeof a=="string"){var o=p.pop();return i(p,o)}else return r.matrix==="Array"?i(p):i(p,"default")},Array:i,Matrix:function(p){var a=p.storage();return i(p.valueOf(),a)},"Array | Matrix, string":function(p,a){return i(p.valueOf(),a)}});function i(D,p){var a=s(D),o=a?new n(0):0;if(h(D),p){var f=u(p);return D.length>0?f.resize(D,o):f}else{var l=[];return D.length>0?Zt(l,D,o):l}}function s(D){var p=!1;return D.forEach(function(a,o,f){Me(a)&&(p=!0,f[o]=a.toNumber())}),p}function h(D){D.forEach(function(p){if(typeof p!="number"||!oe(p)||p<0)throw new Error("Parameters in function zeros must be positive integers")})}}),cn=uo({config:Mt}),Ro=ao({}),zo=lo({}),ur=vo({}),hn=Eo({Matrix:ur}),rt=si({BigNumber:cn,Complex:Ro,DenseMatrix:hn,Fraction:zo}),qo=yo({config:Mt,typed:rt}),Lo=To({typed:rt}),Uo=_o({Matrix:ur,equalScalar:qo,typed:rt}),ln=bo({DenseMatrix:hn,Matrix:ur,SparseMatrix:Uo,typed:rt}),$o=ko({BigNumber:cn,config:Mt,matrix:ln,typed:rt}),jo=Io({matrix:ln,typed:rt});function Pe(e,t,r,u){const n=r.map(D=>e.data.get(D.dataId).values),i={};t.variableNames.forEach((D,p)=>{const a=`get${Ho(D)}`;i[a]=function(...o){const f=p;for(let l=0;l<o.length;l++)o[l]=Zo(o[l],0,r[f].shape[l]);return n[p][Vo(o,r[f].shape)]}}),i.int=Math.trunc,i.atan=Math.atan2;const s=$o(t.outputShape),h=Lo(s,(D,p,a)=>{i.getOutputCoords=()=>p;let o;return i.setOutput=f=>{o=Number.isNaN(f)?0:Math.fround(f)},t.userCode.bind(i)(),o});return e.makeOutput(jo(h),t.outputShape,u)}function Ho(e){return e[0].toUpperCase()+e.substring(1)}function Zo(e,t,r){return Math.min(Math.max(e,t),r-1)}function Vo(e,t){return e.reduce((r,u,n)=>{for(let i=n+1;i<t.length;i++)u*=t[i];return r+u},0)}function Ko(e){const t=e.shape[1],r=e.shape[0];return[{variableNames:["p"],outputShape:[r,t],userCode:function(){const i=this.getOutputCoords();let s=this.getP(i[0],i[1]-2);s+=this.getP(i[0],i[1]-1)*4,s+=this.getP(i[0],i[1])*6,s+=this.getP(i[0],i[1]+1)*4,s+=this.getP(i[0],i[1]+2),this.setOutput(s)}},{variableNames:["p"],outputShape:[r,t],userCode:function(){const i=this.getOutputCoords();let s=this.getP(i[0]-2,i[1]);s+=this.getP(i[0]-1,i[1])*4,s+=this.getP(i[0],i[1])*6,s+=this.getP(i[0]+1,i[1])*4,s+=this.getP(i[0]+2,i[1]),s/=256,this.setOutput(s)}}]}const Wo=e=>{const t=e.inputs.image,r=e.backend,[u,n]=Ko(t),i=Pe(r,u,[t],t.dtype);return Pe(r,n,[i],t.dtype)},Yo={kernelName:"BinomialFilter",backendName:"cpu",kernelFunc:Wo},vt=7,Or=3,Go=Or*Or,$t=4,Jo=($t+1)*($t+1)/$t;function Xo(e){const t=e.shape[1],r=e.shape[0];return{variableNames:["image0","image1","image2"],outputShape:[r,t],userCode:function(){const n=this.getOutputCoords(),i=n[0],s=n[1],h=this.getImage1(i,s);if(h*h<Go){this.setOutput(0);return}if(i<vt||i>r-1-vt){this.setOutput(0);return}if(s<vt||s>t-1-vt){this.setOutput(0);return}let D=!0,p=!0;for(let c=-1;c<=1;c++)for(let d=-1;d<=1;d++){const v=this.getImage0(i+c,s+d),F=this.getImage1(i+c,s+d),E=this.getImage2(i+c,s+d);(h<v||h<F||h<E)&&(D=!1),(h>v||h>F||h>E)&&(p=!1)}if(!D&&!p){this.setOutput(0);return}const a=this.getImage1(i,s+1)+this.getImage1(i,s-1)-2*this.getImage1(i,s),o=this.getImage1(i+1,s)+this.getImage1(i-1,s)-2*this.getImage1(i,s),f=.25*(this.getImage1(i-1,s-1)+this.getImage1(i+1,s+1)-this.getImage1(i-1,s+1)-this.getImage1(i+1,s-1)),l=a*o-f*f;if(Math.abs(l)<1e-4){this.setOutput(0);return}const g=(a+o)*(a+o)/l;if(Math.abs(g)>=Jo){this.setOutput(0);return}this.setOutput(this.getImage1(i,s))}}}const Qo=e=>{let{image0:t,image1:r,image2:u}=e.inputs;const n=e.backend;t=te.engine().runKernel("DownsampleBilinear",{image:t}),u=te.engine().runKernel("UpsampleBilinear",{image:u,targetImage:r});const i=Xo(r);return Pe(n,i,[t,r,u],r.dtype)},es={kernelName:"BuildExtremas",backendName:"cpu",kernelFunc:Qo},ot=36;function ts(e){const t=new Float32Array(e.height);function r(i,s){return e.values[i*e.width+s]}function u(i,s){t[i]=s}function n(i,s){return Math.trunc(i-s*Math.floor(i/s))}for(let i=0;i<e.height;i++){let s=0;for(let w=1;w<ot;w++)r(i,w)>r(i,s)&&(s=w);let h=n(s-1+ot,ot),D=n(s+1,ot);const p=s-1,a=r(i,h),o=s,f=r(i,s),l=s+1,g=r(i,D),c=(l-o)*(l-p),d=(p-o)*(l-p),v=p-o;let F=s;if(Math.abs(c)>1e-5&&Math.abs(d)>1e-5&&Math.abs(v)>1e-5){const w=p*p,N=o*o;let B=(g-f)/c-(a-f)/d;Number.isNaN(B)&&(B=0),F=-((a-f+B*(N-w))/v)/(2*B),Number.isNaN(F)&&(F=0)}const E=2*Math.PI*(F+.5)/ot-Math.PI;u(i,E)}return t}const rs=e=>{const{histograms:t}=e.inputs,r=e.backend,u={values:r.data.get(t.dataId).values,width:t.shape[1],height:t.shape[0]},n=ts(u);return r.makeOutput(n,[t.shape[0]],t.dtype)},ns={kernelName:"ComputeExtremaAngles",backendName:"cpu",kernelFunc:rs},Tr=7;function us(e,t){const r=[];for(let n=1;n<t;n++)r.push("image"+n);return{variableNames:[...r,"extrema","angles","freakPoints"],outputShape:[e,te.FREAKPOINTS.length],userCode:function(){const n=(k,q,U)=>{const K="getImage"+k;return k<1||k>=t?0:this[K](q,U)},i=this.getOutputCoords(),s=i[0],h=i[1],D=this.getFreakPoints(h,1),p=this.getFreakPoints(h,2),a=this.int(this.getExtrema(s,1)),o=this.getExtrema(s,2),f=this.getExtrema(s,3),l=this.getAngles(s),g=Tr*Math.cos(l),c=Tr*Math.sin(l),d=o+D*c+p*g,v=f+D*g+p*-c,F=this.int(Math.floor(v)),E=F+1,w=this.int(Math.floor(d)),N=w+1,B=n(a,w,F),M=n(a,w,E),C=n(a,N,F),_=n(a,N,E),z=(E-v)*(N-d)*B+(v-F)*(N-d)*M+(E-v)*(d-w)*C+(v-F)*(d-w)*_;this.setOutput(z)}}}const is=e=>{const{gaussianImagesT:t,prunedExtremas:r,prunedExtremasAngles:u,freakPointsT:n,pyramidImagesLength:i}=e.inputs,s=e.backend,h=us(r.shape[0],i);return Pe(s,h,[...t,r,u,n],"float32")},os={kernelName:"ComputeExtremaFreak",backendName:"cpu",kernelFunc:is},Dn=(te.FREAKPOINTS.length-1)*te.FREAKPOINTS.length/2,gt=Math.ceil(Dn/8);function ss(e,t){const r=new Float32Array(e.height*gt);function u(s,h){return t.values[s*t.width+h]}function n(s,h){return e.values[s*e.width+h]}function i(s,h,D){r[s*gt+h]=D}for(let s=0;s<e.height;s++)for(let h=0;h<gt;h++){const D=h*8;let p=0;for(let a=0;a<8;a++){if(D+a>=Dn)continue;const o=Math.trunc(u(D+a,0)),f=Math.trunc(u(D+a,1)),l=n(s,o),g=n(s,f);l<g+.01&&(p+=Math.trunc(Math.pow(2,7-a)))}i(s,h,p)}return r}const as=e=>{const{extremaFreaks:t,positionT:r}=e.inputs,{backend:u}=e,n={values:u.data.get(t.dataId).values,height:t.shape[0],width:t.shape[1]},i={values:u.data.get(r.dataId).values,width:r.shape[1]},s=ss(n,i);return u.makeOutput(s,[t.shape[0],gt],"int32")},fs={kernelName:"ComputeFreakDescriptors",backendName:"cpu",kernelFunc:as};function cs(e,t){const r=[];for(let n=1;n<e;n++)r.push("image"+n);return{variableNames:[...r,"extrema"],outputShape:[t,3,3],userCode:function(){const n=(l,g,c)=>{const d="getImage"+l;if(!this.hasOwnProperty(d))throw new Error(`ComputeLocalization:: ${d} does not exist`);return this[d](g,c)},i=this.getOutputCoords(),s=i[0];if(this.getExtrema(s,0)==0)return;const D=i[1]-1,p=i[2]-1,a=this.int(this.getExtrema(s,1)),o=this.int(this.getExtrema(s,2)),f=this.int(this.getExtrema(s,3));this.setOutput(n(a,o+D,f+p))}}}const hs=e=>{const{prunedExtremasList:t,dogPyramidImagesT:r}=e.inputs,u=e.backend,n=cs(r.length,t.length),i=te.tensor(t,[t.length,t[0].length],"int32");return Pe(u,n,[...r.slice(1),i],r[0].dtype)},ls={kernelName:"ComputeLocalization",backendName:"cpu",kernelFunc:hs},Ds=.159154943091895,Ye=36;function ps(e,t,r){`${r}${e.shape[0]}${t.shape[0]}`;const u=[];for(let s=1;s<r;s++)u.push("image"+s);const n={variableNames:[...u,"extrema","radial"],outputShape:[e.shape[0],t.shape[0],2],userCode:function(){const s=(N,B,M)=>{const C="getImage"+N;return this.hasOwnProperty(C)?this[C](B,M):0},h=this.getOutputCoords(),D=h[0],p=h[1],a=h[2],o=this.int(this.getRadial(p,0)),f=this.int(this.getRadial(p,1)),l=this.getRadial(p,2),g=this.int(this.getExtrema(D,1)),c=this.int(this.getExtrema(D,2)),v=this.int(this.getExtrema(D,3))+f,F=c+o,E=s(g,F+1,v)-s(g,F-1,v),w=s(g,F,v+1)-s(g,F,v-1);if(a==0){const B=(this.atan(E,w)+Math.PI)*Ye*Ds;this.setOutput(B);return}if(a==1){const N=Math.sqrt(w*w+E*E),B=l*N;this.setOutput(B);return}}},i={variableNames:["fbinMag"],outputShape:[e.shape[0],Ye],userCode:function(){function s(o,f){return Math.trunc(o-f*Math.floor(o/f))}const h=this.getOutputCoords(),D=h[0],p=h[1];let a=0;for(let o=0;o<t.shape[0];o++){const f=this.getFbinMag(D,o,0),l=Math.trunc(Math.floor(f-.5)),g=s(l+Ye,Ye),c=s(l+1+Ye,Ye);if(g==p||c==p){const d=this.getFbinMag(D,o,1),v=f-l-.5,F=v*-1+1;g==p&&(a+=F*d),c==p&&(a+=v*d)}}this.setOutput(a)}};return[n,i]}const vs=e=>{const{gaussianImagesT:t,prunedExtremasT:r,radialPropertiesT:u,pyramidImagesLength:n}=e.inputs,i=e.backend,[s,h]=ps(r,u,n),D=Pe(i,s,[...t,r,u],u.dtype);return Pe(i,h,[D],u.dtype)},ds={kernelName:"ComputeOrientationHistograms",backendName:"cpu",kernelFunc:vs},gs=e=>{const t=e.inputs.image,r=e.backend,u={variableNames:["p"],outputShape:[Math.floor(t.shape[0]/2),Math.floor(t.shape[1]/2)],userCode:function(){const n=this.getOutputCoords(),i=n[0]*2,s=n[1]*2;let h=new Float32Array(1);h[0]=Math.fround(this.getP(i,s)*.25),h[0]+=Math.fround(this.getP(i+1,s)*.25),h[0]+=Math.fround(this.getP(i,s+1)*.25),h[0]+=Math.fround(this.getP(i+1,s+1)*.25),this.setOutput(h[0])}};return Pe(r,u,[t],t.dtype)},ms={kernelName:"DownsampleBilinear",backendName:"cpu",kernelFunc:gs};function Es(e,t){return{variableNames:["extrema"],outputShape:[e,t],userCode:function(){const u=this.getOutputCoords(),n=u[0]*2,i=u[1]*2;let s=0,h=this.getExtrema(n,i);this.getExtrema(n+1,i)!=0?(s=1,h=this.getExtrema(n+1,i)):this.getExtrema(n,i+1)!=0?(s=2,h=this.getExtrema(n,i+1)):this.getExtrema(n+1,i+1)!=0&&(s=3,h=this.getExtrema(n+1,i+1)),h<0?this.setOutput(s*-1e3+h):this.setOutput(s*1e3+h)}}}const Fs=e=>{const{extremasResultT:t}=e.inputs,r=e.backend,u=t.shape[0],n=t.shape[1],i=Math.floor(u/2),s=Math.floor(n/2),h=Es(i,s);return Pe(r,h,[t],t.dtype)},As={kernelName:"ExtremaReduction",backendName:"cpu",kernelFunc:Fs},He=36,ws=5;function Cs(e){const t=new Float32Array(e.height*He);function r(i,s){return e.values[i*e.width+s]}function u(i,s,h){t[i*He+s]=h}function n(i,s){return Math.trunc(i-s*Math.floor(i/s))}for(let i=0;i<e.height;i++)for(let s=0;s<He;s++){const h=n(s-1+He,He),D=n(s+1,He),p=.274068619061197*r(i,h)+.451862761877606*r(i,s)+.274068619061197*r(i,D);u(i,s,p)}return t}const ys=e=>{const{histograms:t}=e.inputs,r=e.backend,u={values:r.data.get(t.dataId).values,height:t.shape[0],width:t.shape[1]};for(let n=0;n<ws;n++)u.values=Cs(u);return r.makeOutput(u.values,[t.shape[0],He],t.dtype)},Bs={kernelName:"SmoothHistograms",backendName:"cpu",kernelFunc:ys};function Ns(e){return{variableNames:["p"],outputShape:[e.shape[0],e.shape[1]],userCode:function(){const r=this.getOutputCoords(),u=r[0],n=r[1],i=Math.fround(.5*u)-.25,s=Math.fround(.5*n)-.25,h=Math.floor(i),D=Math.ceil(i),p=Math.floor(s),a=Math.ceil(s),o=this.int(h),f=this.int(D),l=this.int(p),g=this.int(a);let c=0;c+=this.getP(o,l)*Math.fround((a-s)*(D-i)),c+=this.getP(f,l)*Math.fround((a-s)*(i-h)),c+=this.getP(o,g)*Math.fround((s-p)*(D-i)),c+=this.getP(f,g)*Math.fround((s-p)*(i-h)),this.setOutput(c)}}}const _s=e=>{const{image:t,targetImage:r}=e.inputs,u=e.backend,n=Ns(r);return Pe(u,n,[t],t.dtype)},Ms={kernelName:"UpsampleBilinear",backendName:"cpu",kernelFunc:_s};te.registerKernel(Yo);te.registerKernel(es);te.registerKernel(ns);te.registerKernel(os);te.registerKernel(fs);te.registerKernel(ls);te.registerKernel(ds);te.registerKernel(ms);te.registerKernel(As);te.registerKernel(Bs);te.registerKernel(Ms);class bs extends te.CompilerBase{createProcessCanvas(t){return console.log("offline compiler canvas"),Wn.createCanvas(t.width,t.height)}compileTrack({progressCallback:t,targetImages:r,basePercent:u}){return new Promise((n,i)=>{const s=(100-u)/r.length;let h=0;const D=[];for(let p=0;p<r.length;p++){const a=r[p],o=te.buildTrackingImageList(a),f=s/o.length,l=ru(o,g=>{h+=f,t(u+h)});D.push(l)}n(D)})}}exports.Compiler=te.Compiler;exports.Controller=te.Controller;exports.UI=Qt.UI;exports.OfflineCompiler=bs;
//# sourceMappingURL=mindar-image.prod.js.map
